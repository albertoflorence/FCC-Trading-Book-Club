webpackJsonp([1],{"0Faw":function(t,e){},"1lsm":function(t,e){},"3VYN":function(t,e){},"6CC3":function(t,e){},"7hHz":function(t,e){},"7zck":function(t,e){},"9OrO":function(t,e){},CTPg:function(t,e){},DmYu:function(t,e){},FVJ9:function(t,e){},JAgY:function(t,e){},L1cv:function(t,e){},NHnr:function(t,e,n){"use strict";function s(t){n("q8MD")}function o(t){n("3VYN")}function r(t){n("l6E2")}function i(t){n("FVJ9")}function a(t){n("YQew")}function c(t){n("bXF6")}function u(t){n("T7Kz")}function l(t){n("v8BH")}function d(t){n("6CC3")}function f(t){n("X0PW")}function m(t){n("SQRL")}function v(t){n("L1cv")}function h(t){n("ZaCr")}function p(t){n("JAgY")}function g(t){n("Q+Zj")}function _(t){n("aViI")}function b(t){n("vplh")}function k(t){n("1lsm")}function x(t){n("iuDI")}function y(t){n("DmYu")}function w(t){n("9OrO")}function $(t){n("y5F8")}function I(t){n("xgl4")}function C(t){n("tV7J")}function L(t){n("CTPg")}function U(t){n("mtCO")}function B(t){n("eapX")}function F(t){n("0Faw")}function T(t){n("dw3h")}function E(t){n("Q+EQ")}function M(t){n("VsN4")}function R(t){n("7hHz")}Object.defineProperty(e,"__esModule",{value:!0});var N=n("Xxa5"),S=n.n(N),P=n("exGp"),O=n.n(P),V=n("7+uW"),A=n("bOdI"),D=n.n(A),W={data:function(){return{value:""}},methods:{search:function(){var t=this;return O()(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.value){e.next=2;break}return e.abrupt("return");case 2:return t.$store.dispatch("startLoading","app"),e.next=5,t.$store.dispatch("searchBooks",t.value);case 5:t.$store.dispatch("stopLoading","app"),t.$router.push({name:"books-result",query:{search:t.value}});case 7:case"end":return e.stop()}},e,t)}))()}}},q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",[n("v-flex",{attrs:{xs8:""}},[n("form",{on:{submit:function(e){e.preventDefault(),t.search(e)}}},[n("v-text-field",{staticStyle:{"max-width":"500px","min-width":"128px"},attrs:{clearable:"",light:"",placeholder:"Search","append-icon":"search","append-icon-cb":t.search,solo:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])],1)},H=[],Q={render:q,staticRenderFns:H},Y=Q,J=n("VU/8"),G=s,j=J(W,Y,!1,G,null,null),z=j.exports,X={computed:{menuItems:function(){return this.$store.getters.isAuthenticated?[{title:"Logout",icon:"exit_to_app",link:{name:"home"},action:this.logout}]:[{title:"Login",icon:"person",link:{name:"auth"}}]}},methods:{logout:function(){this.$store.dispatch("signOut")}}},Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"inline-flex"}},t._l(t.menuItems,function(e){return n("router-link",{key:e.title,staticStyle:{cursor:"pointer"},attrs:{tag:"div",to:e.link},nativeOn:{click:function(t){e.action&&e.action()}}},[n("v-icon",[t._v(t._s(e.icon))]),t._v(" "),n("div",{staticClass:"caption grey-text"},[t._v(t._s(e.title))])],1)}))},K=[],tt={render:Z,staticRenderFns:K},et=tt,nt=n("VU/8"),st=o,ot=nt(X,et,!1,st,null,null),rt=ot.exports,it=this,at={computed:{user:function(){return this.$store.getters.user}},data:function(){return{items:[{title:"My books",icon:"account_box",link:{name:"user-books"}},{title:"Configuration",icon:"settings",link:{name:"user-settings"}},{title:"Loggout",icon:"exit_to_app",link:{name:"home"},action:it.loggout}]}},methods:{loggout:function(){this.$store.dispatch("signOut")}}},ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("v-menu",{attrs:{"offset-y":"",origin:"center center",transition:"scale-transition",bottom:""}},[n("v-btn",{attrs:{slot:"activator",small:"",icon:"",flat:""},slot:"activator"},[n("v-icon",[t._v("settings")])],1),t._v(" "),n("v-list",[n("v-container",{staticClass:"pa-3"},[n("v-list-tile",{staticClass:"text-xs-left"},[n("v-list-tile-action",[n("v-icon",[t._v("person")])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v(t._s(t.user.userName))]),t._v(" "),n("v-list-tile-sub-title",[t._v(t._s(t.user.email))])],1)],1),t._v(" "),n("v-divider"),t._v(" "),t._l(t.items,function(e){return n("v-list-tile",{key:e.title,staticClass:"pt-0",attrs:{dense:"",to:e.link?e.link:null}},[e.icon?n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.icon))])],1):t._e(),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("\n            "+t._s(e.title)+"\n          ")])],1)],1)})],2)],1)],1):t._e()},ut=[],lt={render:ct,staticRenderFns:ut},dt=lt,ft=n("VU/8"),mt=r,vt=ft(at,dt,!1,mt,null,null),ht=vt.exports,pt={computed:{notifications:function(){return this.$store.getters.notifications},notSeenCount:function(){return this.$store.getters.notSeenCount},hasNotifications:function(){return this.notifications&&this.notifications.length>0},hasNewNotifications:function(){return this.notSeenCount>0}},data:function(){return{showMenu:!1}},methods:{seen:function(t){var e=this;return O()(S.a.mark(function n(){return S.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("notificationSeen",t);case 2:e.fetchData();case 3:case"end":return n.stop()}},n,e)}))()},remove:function(t){this.$store.dispatch("deleteNotification",t)},fetchData:function(){this.$store.dispatch("getNotifications")}},created:function(){this.$store.dispatch("getNotifications")}},gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"offset-y":"",origin:"center center","close-on-content-click":!1,transition:"scale-transition",botton:""}},[n("v-badge",{attrs:{slot:"activator",overlap:"",color:"red"},slot:"activator",model:{value:t.hasNewNotifications,callback:function(e){t.hasNewNotifications=e},expression:"hasNewNotifications"}},[n("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(t.notSeenCount))]),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",flat:""},on:{click:t.fetchData}},[n("v-icon",[t._v("notifications")])],1)],1),t._v(" "),n("v-container",{staticClass:"pa-0 elevation-20",staticStyle:{"max-height":"500px",width:"500px"}},[n("v-list",{attrs:{"three-line":""}},[n("v-container",{staticClass:"py-2"},[n("h3",{staticClass:"text-xs-left"},[t._v("Notifications")])]),t._v(" "),n("v-divider"),t._v(" "),t.notifications?n("v-container",t._l(t.notifications,function(e){return n("v-list-tile",{key:e.book,staticClass:"border elevation-1",attrs:{avatar:"",ripple:!0,replace:"",to:"/user/books"},on:{click:function(n){t.seen(e._id)}}},[n("v-list-tile-avatar",[n("v-icon",{attrs:{color:"green",disabled:e.seen}},[t._v("new_releases")])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",{domProps:{innerHTML:t._s(e.msg)}}),t._v(" "),n("v-list-tile-sub-title",[t._v(t._s(e.time))])],1),t._v(" "),n("v-list-tile-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){t.remove(e._id)}}},[n("v-icon",{attrs:{color:"red"}},[t._v("remove")])],1)],1)],1)})):t._e(),t._v(" "),t.hasNotifications?t._e():n("h4",{staticClass:"ma-3"},[t._v("no new notifications")])],1)],1)],1)},_t=[],bt={render:gt,staticRenderFns:_t},kt=bt,xt=n("VU/8"),yt=i,wt=xt(pt,kt,!1,yt,"data-v-fbb8410c",null),$t=wt.exports,It={computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated}},components:{LinkItems:rt,Settings:ht,Notifications:$t}},Ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"inline-flex"}},[t.isAuthenticated?n("div",[n("notifications",{staticClass:"ml-3"}),t._v(" "),n("settings",{staticClass:"ml-3"})],1):t._e(),t._v(" "),n("link-items",{staticClass:"ml-3"})],1)},Lt=[],Ut={render:Ct,staticRenderFns:Lt},Bt=Ut,Ft=n("VU/8"),Tt=a,Et=Ft(It,Bt,!1,Tt,null,null),Mt=Et.exports,Rt={props:["activator"],data:function(){return{items:[{title:"test",icon:"person",link:{name:""}}]}},methods:{test:function(){console.log("lol")}}},Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{fixed:"",app:"",clipped:"","disable-route-watcher":"","disable-resize-watcher":""},model:{value:t.activator,callback:function(e){t.activator=e},expression:"activator"}},[n("v-list",t._l(t.items,function(e){return n("v-list-tile",{key:e.title,staticClass:"pt-0",attrs:{dense:""},on:{click:t.test}},[n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("\n          "+t._s(e.title)+"\n        ")])],1)],1)}))],1)},St=[],Pt={render:Nt,staticRenderFns:St},Ot=Pt,Vt=n("VU/8"),At=c,Dt=Vt(Rt,Ot,!1,At,null,null),Wt=Dt.exports,qt={name:"app-toolbar",data:function(){return{nav:!1}},components:{Search:z,ToolbarItems:Mt,Navigation:Wt}},Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spacing"},[n("navigation",{attrs:{activator:t.nav}}),t._v(" "),n("v-toolbar",{attrs:{color:"primary",dark:"",dense:"",fixed:"",app:"","clipped-left":"",dense:!1}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.nav=!t.nav}}}),t._v(" "),n("v-toolbar-title",{staticClass:"mr-5"},[n("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:{name:"home"},tag:"span"}},[t._v("\n        CoolBook\n      ")])],1),t._v(" "),n("search"),t._v(" "),n("v-spacer"),t._v(" "),n("toolbar-items")],1)],1)},Qt=[],Yt={render:Ht,staticRenderFns:Qt},Jt=Yt,Gt=n("VU/8"),jt=u,zt=Gt(qt,Jt,!1,jt,"data-v-2f0250fe",null),Xt=zt.exports,Zt={name:"app",computed:{isLoading:function(){return this.$store.getters.isLoading("app")},isAutoSigning:function(){return this.$store.getters.isLoading("autoSigning")},route:function(){return this.$route.fullPath}},components:D()({},Xt.name,Xt)},Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isAutoSigning?t._e():n("v-app",[n("app-toolbar"),t._v(" "),t.isLoading?n("v-progress-linear",{staticClass:"mt-0",attrs:{indeterminate:!0,height:"3"}}):t._e(),t._v(" "),n("router-view",{key:t.route,staticClass:"mt-3"})],1)},te=[],ee={render:Kt,staticRenderFns:te},ne=ee,se=n("VU/8"),oe=l,re=se(Zt,ne,!1,oe,null,null),ie=re.exports,ae=n("/ocq"),ce={props:["books"]},ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.books?n("v-layout",[n("v-flex",{attrs:{xs10:"","offset-xs1":""}},[n("v-container",{attrs:{fluid:"","grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.books,function(e){return n("v-flex",{key:e.bookId,attrs:{md2:"",xs12:""}},[n("v-card",{attrs:{to:"/books/"+e.bookId}},[n("v-container",[n("div",{staticStyle:{"max-width":"128px","max-height":"175px",margin:"auto"}},[n("v-card-media",{attrs:{src:e.thumbnail,height:"175px"}})],1)]),t._v(" "),n("v-list",[n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"text-xs-center"},[t._v(" "+t._s(e.title))]),t._v(" "),n("v-tooltip",{attrs:{top:""}},[n("span",[t._v(t._s(e.title))])])],1)],1)],1)],1)],1)}))],1)],1)],1):t._e()},le=[],de={render:ue,staticRenderFns:le},fe=de,me=n("VU/8"),ve=d,he=me(ce,fe,!1,ve,null,null),pe=he.exports,ge=n("//Fk"),_e=n.n(ge),be=n("mvHQ"),ke=n.n(be),xe=n("mtWM"),ye=n.n(xe),we=ye.a.create({baseURL:"https://padraoserver.herokuapp.com"});we.interceptors.response.use(function(t){return _e.a.resolve(t.data)},function(t){return 401===t.response.status?void(window.location.pathname="/login"):_e.a.reject(t)});var $e=this,Ie=function(t){we.defaults.headers.common.Authorization="Bearer "+t},Ce=function(t){var e=t.user,n=t.token;return n&&(localStorage.setItem("authentication:authUser",ke()({token:n})),Ie(n)),e},Le=function(){var t=O()(S.a.mark(function t(){var e,n;return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(e=JSON.parse(localStorage.getItem("authentication:authUser")))){t.next=8;break}if(!(n=e.token)){t.next=8;break}return t.next=7,Be({token:n});case 7:return t.abrupt("return",t.sent);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),_e.a.reject(t.t0);case 13:case"end":return t.stop()}},t,$e,[[0,10]])}));return function(){return t.apply(this,arguments)}}(),Ue=function(){return Ie(null),localStorage.removeItem("authentication:authUser"),_e.a.resolve()},Be=function(t){return we.post("auth/signin/token",t).then(Ce)},Fe={signIn:function(t){return we.post("auth/signin",t).then(Ce)},signUp:function(t){return we.post("auth/signup",t).then(Ce)},getSignInUrl:function(t){return we.get("auth/url/"+t)},signInWithGoogle:function(t){return we.post("auth/signin/google",{code:t}).then(Ce)},signInWithToken:Be,autoSignIn:Le,signOut:Ue},Te={updateUser:function(t,e){return we.put("users",{property:t,data:e})}},Ee={get:function(t){return we.get("/books",{params:t})},register:function(t){return we.post("/books/register",t)},getById:function(t){return we.get("books/"+t)},getMatchUsers:function(t){return we.get("books/match/users/"+t)}},Me={get:function(){return we.get("/notifications")},seen:function(t){return we.put("/notifications/"+t,{seen:!0})},delete:function(t){return we.delete("/notifications/"+t)}},Re={create:function(t){return we.post("trades",t)},getOne:function(t){return we.get("trades:"+t)},get:function(t){return we.get("trades",{params:t})}},Ne={auth:Fe,user:Te,book:Ee,notification:Me,trade:Re},Se={computed:{books:function(){return this.$store.getters.myBooks}},methods:{test:function(){var t=this;return O()(S.a.mark(function e(){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ne.action.test({bookId:"$in: KGt-FxUEj48C, fOgtAgAAQBAJ"});case 2:case"end":return t.stop()}},e,t)}))()}},created:function(){this.$store.dispatch("fetchBooksByField",{commitName:"",filters:{}})},components:{BooksShow:pe}},Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-btn",{on:{click:t.test}},[t._v("routes test")]),t._v(" "),n("books-show",{attrs:{books:t.books}})],1)},Oe=[],Ve={render:Pe,staticRenderFns:Oe},Ae=Ve,De=n("VU/8"),We=f,qe=De(Se,Ae,!1,We,"data-v-34d626cd",null),He=qe.exports,Qe={data:function(){return{form:"register",email:"",password:"",userName:"",gender:"",genderOptions:[{value:"female",text:"Female"},{value:"male",text:"Male"},{value:"other",text:"Other"}]}},computed:{isLoading:function(){return this.$store.getters.isLoading(this.form)}},methods:{signUp:function(){this.$store.dispatch("signUp",{data:{email:this.email,password:this.password,gender:this.gender,userName:this.userName},from:this.form}),this.$store.dispatch("startLoading",this.form)}}},Ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs12:"",md10:"","offset-md1":""}},[n("form",{on:{submit:function(e){e.preventDefault(),t.signUp(e)}}},[n("v-card-title",[n("h1",[t._v("Register")])]),t._v(" "),n("form-message",{attrs:{name:t.form}}),t._v(" "),n("v-card-text",[n("v-layout",{attrs:{column:t.$vuetify.breakpoint.xsOnly}},[n("v-flex",{attrs:{xs12:"",md5:""}},[n("v-text-field",{attrs:{label:"Email",placeholder:"you@example.com"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),n("v-text-field",{attrs:{placeholder:"Create a Password",label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-flex",{attrs:{xs12:"",md5:""}},[n("v-text-field",{attrs:{label:"Username",placeholder:"Pick a username"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),t._v(" "),n("v-select",{attrs:{label:"Gender","persistent-hint":"",items:t.genderOptions},model:{value:t.gender,callback:function(e){t.gender=e},expression:"gender"}})],1)],1)],1),t._v(" "),n("v-flex",{attrs:{xs5:"","offset-xs3":""}},[n("v-btn",{attrs:{disabled:t.isLoading,color:"primary",block:"",type:"submit"}},[n("loading-circle",{attrs:{name:t.form,title:"Register"}})],1)],1)],1)])],1)],1)},Je=[],Ge={render:Ye,staticRenderFns:Je},je=Ge,ze=n("VU/8"),Xe=m,Ze=ze(Qe,je,!1,Xe,"data-v-2bbb376b",null),Ke=Ze.exports,tn={methods:{signIn:function(){this.$store.dispatch("signInWithSocialRedirect","google")}}},en=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-btn",{staticClass:"normalcase",attrs:{color:"red",dark:""},on:{click:t.signIn}},[n("span",{staticClass:"g"},[t._v("g")]),t._v("\n  +\n  "),n("div",{staticClass:"divisor"}),t._v("\n  Sign in with Google\n")])},nn=[],sn={render:en,staticRenderFns:nn},on=sn,rn=n("VU/8"),an=v,cn=rn(tn,on,!1,an,"data-v-5b7b974a",null),un=cn.exports,ln={computed:{isLoading:function(){return this.$store.getters.isLoading(this.form)}},data:function(){return{form:"login",email:"",password:""}},methods:{signIn:function(){this.$store.dispatch("signIn",{data:{email:this.email,password:this.password},from:this.form}),this.$store.dispatch("startLoading",this.form)}},components:{LoginGoogle:un}},dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",[n("form",{on:{submit:function(e){e.preventDefault(),t.signIn(e)}}},[n("v-card-title",[n("div",{staticClass:"text-xs-left"},[n("h1",[t._v("Login")]),t._v(" "),n("p",{staticClass:"grey--text"},[t._v("Already have an account? Sign in here below!")])])]),t._v(" "),n("form-message",{attrs:{name:t.form}}),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),n("v-text-field",{attrs:{label:"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("v-btn",{attrs:{disabled:t.isLoading,color:"primary",type:"submit"}},[n("loading-circle",{attrs:{name:t.form,title:"Login"}})],1)],1),t._v(" "),n("login-google")],1)],1)],1)},fn=[],mn={render:dn,staticRenderFns:fn},vn=mn,hn=n("VU/8"),pn=h,gn=hn(ln,vn,!1,pn,"data-v-7c4e304b",null),_n=gn.exports,bn={computed:{isNotLoggedIn:function(){return!this.$store.getters.isAuthenticated||(this.$router.push({name:"home"}),!1)}},data:function(){return{}},components:{Register:Ke,Login:_n}},kn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isNotLoggedIn?n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs12:"",md10:"","offset-md1":""}},[n("v-card",[n("v-layout",{attrs:{row:"",column:t.$vuetify.breakpoint.xsOnly}},[n("v-flex",{attrs:{lg8:"",xs12:""}},[n("register")],1),t._v(" "),n("div",{staticClass:"vdivisor"}),t._v(" "),n("v-flex",{attrs:{lg4:"",xs12:""}},[n("login")],1)],1)],1)],1)],1)],1):t._e()},xn=[],yn={render:kn,staticRenderFns:xn},wn=yn,$n=n("VU/8"),In=p,Cn=$n(bn,wn,!1,In,null,null),Ln=Cn.exports,Un={props:["code"],computed:{isAuthenticated:function(){return!this.$store.getters.isAuthenticated}},methods:{goToHome:function(){this.$router.push({name:"home"})}},created:function(){this.code||this.goToHome(),this.$store.dispatch("signInWithGoogle",this.code)}},Bn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-dialog",{attrs:{fullscreen:"",overlay:!0,scrollable:""},model:{value:t.isAuthenticated,callback:function(e){t.isAuthenticated=e},expression:"isAuthenticated"}},[n("v-card",[n("h3",[t._v("Loading...")]),t._v(" "),t.isAuthenticated?t._e():n("div",[t._v(t._s(t.goToHome()))])])],1)],1)},Fn=[],Tn={render:Bn,staticRenderFns:Fn},En=Tn,Mn=n("VU/8"),Rn=g,Nn=Mn(Un,En,!1,Rn,null,null),Sn=Nn.exports,Pn={},On=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._v("\n  NOT FOUND\n")])},Vn=[],An={render:On,staticRenderFns:Vn},Dn=An,Wn=n("VU/8"),qn=_,Hn=Wn(Pn,Dn,!1,qn,null,null),Qn=Hn.exports,Yn={data:function(){return{Items:[{title:"Overview",icon:"account_box",name:"overview"},{title:"Password",icon:"vpn_key",name:"password"},{title:"Email",icon:"email",name:"email"}]}},methods:{itemChoose:function(t){this.$emit("itemChoose",t)}}},Jn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",[n("v-list",t._l(t.Items,function(e){return n("v-list-tile",{key:e.name,staticClass:"pt-0",attrs:{dense:""},on:{click:function(n){t.itemChoose(e.name)}}},[e.icon?n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.icon))])],1):t._e(),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("\r\n              "+t._s(e.title)+"\r\n            ")])],1)],1)}))],1)],1)],1)},Gn=[],jn={render:Jn,staticRenderFns:Gn},zn=jn,Xn=n("VU/8"),Zn=b,Kn=Xn(Yn,zn,!1,Zn,null,null),ts=Kn.exports,es={computed:{isEditing:function(){var t=this;return function(e){return t.editField===e}},user:function(){var t=this.$store.getters.user;return[{label:"User Name",value:t.userName,name:"userName",editable:!1},{label:"Email address",value:t.email,name:"email",editable:!1},{label:"City",value:t.city,name:"city",editable:!0},{label:"State",value:t.state,name:"state",editable:!0}]},isLoading:function(){var t=this;return function(e){return t.$store.getters.isLoading(e)}}},data:function(){return{editField:null}},methods:{edit:function(t,e){var n=this;return O()(S.a.mark(function s(){return S.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n.$store.dispatch("startLoading",t),s.next=3,n.$store.dispatch("updateUserData",{from:"overview",data:{property:t,data:e}});case 3:n.$store.dispatch("stopLoading",t),n.editField=null;case 5:case"end":return s.stop()}},s,n)}))()}}},ns=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs6:""}},[n("v-card",{staticClass:"pa-5"},[n("v-card-title",[n("div",{staticClass:"text-xs-left"},[n("h1",[t._v("Overview")])])]),t._v(" "),n("v-card-text",[n("v-divider"),t._v(" "),n("form",[n("form-message",{attrs:{name:"overview"}}),t._v(" "),t._l(t.user,function(e){return n("v-text-field",{key:e.value,class:t.isEditing(e.name)?"input-group--focused":"",attrs:{label:e.label,"append-icon":e.editable?"edit":"","append-icon-cb":function(){return t.editField=e.name},readonly:!t.isEditing(e.name),loading:!!t.isLoading(e.name)&&"green",autofocus:t.isEditing(e.name)},on:{keyup:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;t.isEditing(e.name)&&t.edit(e.name,e.value)}},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}})})],2)],1)],1)],1)],1)],1):t._e()},ss=[],os={render:ns,staticRenderFns:ss},rs=os,is=n("VU/8"),as=k,cs=is(es,rs,!1,as,null,null),us=cs.exports,ls={computed:{isLoading:function(){return this.$store.getters.isLoading(this.form)}},data:function(){return{form:"changeEmail",newEmail:"",password:""}},methods:{changeEmail:function(){this.$store.dispatch("updateUserData",{data:{property:"email",data:{password:this.password,newEmail:this.newEmail}},from:this.form}),this.$store.dispatch("startLoading",this.form)}}},ds=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs6:""}},[n("v-card",{staticClass:"pa-5"},[n("form",{on:{submit:function(e){e.preventDefault(),t.changeEmail(e)}}},[n("v-card-title",[n("div",{staticClass:"text-xs-left"},[n("h1",[t._v("Change Email")])])]),t._v(" "),n("v-divider"),t._v(" "),n("form-message",{attrs:{name:t.form}}),t._v(" "),n("v-card-text",[n("v-text-field",{staticClass:"mb-4",attrs:{label:"Current e-mail address",readonly:""},model:{value:t.$store.getters.user.email,callback:function(e){t.$set(t.$store.getters.user,"email",e)},expression:"$store.getters.user.email"}}),t._v(" "),n("v-text-field",{attrs:{label:"New e-mail address"},model:{value:t.newEmail,callback:function(e){t.newEmail=e},expression:"newEmail"}}),t._v(" "),n("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("v-btn",{attrs:{disabled:t.isLoading,type:"submit"}},[n("loading-circle",{attrs:{name:t.form,title:"Save"}})],1)],1)])],1)],1)],1)},fs=[],ms={render:ds,staticRenderFns:fs},vs=ms,hs=n("VU/8"),ps=x,gs=hs(ls,vs,!1,ps,null,null),_s=gs.exports,bs={computed:{isLoading:function(){return this.$store.getters.isLoading(this.form)}},data:function(){return{form:"changePassword",password:"",newPassword:"",confirmPassword:""}},methods:{changePassword:function(){this.$store.dispatch("updateUserData",{data:{property:"password",data:{password:this.password,newPassword:this.newPassword,confirmPassword:this.confirmPassword}},from:this.form}),this.$store.dispatch("startLoading",this.form)}}},ks=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs6:""}},[n("v-card",{staticClass:"pa-5"},[n("form",{on:{submit:function(e){e.preventDefault(),t.changePassword(e)}}},[n("v-card-title",[n("div",{staticClass:"text-xs-left"},[n("h1",[t._v("Change Password")])])]),t._v(" "),n("v-divider"),t._v(" "),n("form-message",{attrs:{name:t.form}}),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Current password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("v-text-field",{attrs:{label:"New password",type:"password"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),t._v(" "),n("v-text-field",{attrs:{label:"Confirm password",type:"password"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1),t._v(" "),n("v-btn",{attrs:{disabled:t.isLoading,type:"submit"}},[n("loading-circle",{attrs:{name:t.form,title:"Save"}})],1)],1)])],1)],1)],1)},xs=[],ys={render:ks,staticRenderFns:xs},ws=ys,$s=n("VU/8"),Is=y,Cs=$s(bs,ws,!1,Is,null,null),Ls=Cs.exports,Us={data:function(){return{menuItem:"overview"}},methods:{chosen:function(t){this.menuItem=t}},components:{MenuItems:ts,Overview:us,ChangeEmail:_s,ChangePassword:Ls}},Bs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs3:""}},[n("menu-items",{on:{itemChoose:t.chosen}})],1),t._v(" "),n("v-flex",{attrs:{xs8:""}},["overview"===t.menuItem?n("overview"):t._e(),t._v(" "),"email"===t.menuItem?n("change-email"):t._e(),t._v(" "),"password"===t.menuItem?n("change-password"):t._e()],1)],1)],1)},Fs=[],Ts={render:Bs,staticRenderFns:Fs},Es=Ts,Ms=n("VU/8"),Rs=w,Ns=Ms(Us,Es,!1,Rs,null,null),Ss=Ns.exports,Ps={computed:{myBooks:function(){return this.$store.getters.myBooks},myWishList:function(){return this.$store.getters.myWishList},myPendingTrades:function(){return this.$store.getters.myPendingTrades.map(function(t){return t.book})},tabs:function(){return[{name:"My Books",content:this.myBooks},{name:"My Wish List",content:this.myWishList},{name:"My Pending Trades",content:this.myPendingTrades}]}},created:function(){var t=this.$store.getters.user.userName;this.$store.dispatch("fetchBooksByField",{commitName:"setMyBooks",filters:{ownedBy:t}}),this.$store.dispatch("fetchBooksByField",{commitName:"setMyWishList",filters:{requestedBy:t}}),this.$store.dispatch("getTrades")},data:function(){return{active:null}},components:{BooksShow:pe}},Os=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("v-tabs-bar",{attrs:{color:"blue",dark:""}},[t._l(t.tabs,function(e){return n("v-tabs-item",{key:e.name,attrs:{href:"#"+e.name,ripple:""}},[n("h4",{staticStyle:{"text-transform":"none"}},[t._v(t._s(e.name))])])}),t._v(" "),n("v-tabs-slider",{attrs:{color:"yellow"}})],2),t._v(" "),n("v-tabs-items",t._l(t.tabs,function(t){return n("v-tabs-content",{key:t.name,attrs:{id:t.name}},[n("v-card",{attrs:{flat:""}},[n("books-show",{attrs:{books:t.content}})],1)],1)}))],1)],1)},Vs=[],As={render:Os,staticRenderFns:Vs},Ds=As,Ws=n("VU/8"),qs=$,Hs=Ws(Ps,Ds,!1,qs,null,null),Qs=Hs.exports,Ys={},Js=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},Gs=[],js={render:Js,staticRenderFns:Gs},zs=js,Xs=n("VU/8"),Zs=I,Ks=Xs(Ys,zs,!1,Zs,"data-v-55ebcdf0",null),to=Ks.exports,eo={props:["name","book","color","icon"],computed:{count:function(){return this.book[this.name+"Count"]},showBadge:function(){return this.count>0},isBookmarked:function(){return!!Array.isArray(this.book[this.name])&&this.book[this.name].includes(this.$store.getters.user.userName)}},data:function(){return{show:!1}},methods:{register:function(){this.$store.dispatch("registerUserBook",{type:this.name,bookId:this.book.bookId})}},components:{NotificationDialog:to}},no=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mr-4"},[n("v-tooltip",{attrs:{top:""}},[n("v-badge",{attrs:{slot:"activator",right:""},slot:"activator",model:{value:t.showBadge,callback:function(e){t.showBadge=e},expression:"showBadge"}},[n("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(t.count))]),t._v(" "),n("v-btn",{staticClass:"ma-0",attrs:{icon:""},on:{click:t.register}},[n("v-icon",{attrs:{large:"",color:t.color,disabled:!t.isBookmarked}},[t._v(t._s(this.icon))])],1)],1),t._v(" "),n("span",[t._v(t._s(this.name)+" this book")])],1)],1)},so=[],oo={render:no,staticRenderFns:so},ro=oo,io=n("VU/8"),ao=C,co=io(eo,ro,!1,ao,null,null),uo=co.exports,lo={props:["bookId"],computed:{matchedUsers:function(){return this.$store.getters.matchedUsers},isLoading:function(){return this.$store.getters.isLoading("matchUsers")}},methods:{getMatchUsers:function(){var t=this;return O()(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.dispatch("startLoading","matchUsers"),e.next=3,t.$store.dispatch("getMatchUsers",t.bookId);case 3:t.$store.dispatch("stopLoading","matchUsers");case 4:case"end":return e.stop()}},e,t)}))()}}},fo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-xs-center"},[n("v-menu",{attrs:{top:"","offset-y":""}},[n("v-btn",{attrs:{slot:"activator",outline:"",color:"indigo"},on:{click:t.getMatchUsers},slot:"activator"},[t._v("People that you can trade with")]),t._v(" "),!t.isLoading&&t.matchedUsers&&t.matchedUsers.length>0?n("v-list",t._l(t.matchedUsers,function(e,s){return n("v-list-tile",{key:s,attrs:{to:{name:"trade",params:{user:e},query:{book:t.bookId}}}},[n("v-list-tile-title",[t._v(t._s(e))])],1)})):n("v-list",[n("v-list-tile",[t.isLoading?n("v-list-tile-title",{staticClass:"text-xs-center"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):n("v-list-tile-title",{staticClass:"text-xs-center"},[t._v(" Sorry, no match for you today !")])],1)],1)],1)],1)},mo=[],vo={render:fo,staticRenderFns:mo},ho=vo,po=n("VU/8"),go=L,_o=po(lo,ho,!1,go,null,null),bo=_o.exports,ko={computed:{book:function(){return this.$store.getters.bookById(this.$route.params.id)},isLoading:function(){return this.$store.getters.isLoading("app")}},data:function(){return{show:!1}},created:function(){var t=this;return O()(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.book){e.next=5;break}return t.$store.dispatch("startLoading","app"),e.next=4,t.$store.dispatch("fetchBookById",t.$route.params.id);case 4:t.$store.dispatch("stopLoading","app");case 5:case"end":return e.stop()}},e,t)}))()},components:{Action:uo,MatchUsers:bo}},xo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.book&&!t.isLoading?n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[n("v-card",[n("v-container",{staticClass:"elevation-8"},[n("v-flex",[n("img",{staticStyle:{width:"300px",height:"411px"},attrs:{src:t.book.url_image}})]),t._v(" "),n("v-container",[n("v-divider")],1),t._v(" "),n("v-layout",[n("v-flex",[n("v-card-title",[n("div",{staticClass:"text-xs-left"},[n("div",{staticClass:"headline"},[t._v(t._s(t.book.title))]),t._v(" "),n("p",{staticClass:"grey--text"},[t._v(" Author: "+t._s(t.book.author))]),t._v(" "),n("p",{staticClass:"grey--text"},[t._v(" Publisher: "+t._s(t.book.publisher))]),t._v(" "),n("p",{staticClass:"grey--text"},[t._v(" Published on: "+t._s(t.book.publishedDate))])])])],1),t._v(" "),n("v-flex",{staticClass:"mt-5"},[n("v-card-actions",[n("v-spacer"),t._v(" "),n("action",{attrs:{icon:"compare_arrows",name:"requestedBy",color:"orange",book:this.book}}),t._v(" "),n("action",{attrs:{icon:"turned_in",name:"ownedBy",color:"green",book:this.book}})],1)],1)],1),t._v(" "),n("match-users",{attrs:{bookId:t.book.bookId}}),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){t.show=!t.show}}},[n("v-icon",[t._v(t._s(t.show?"keyboard_arrow_down":"keyboard_arrow_up"))])],1)],1),t._v(" "),n("v-slide-y-transition",[n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"text-xs-left",domProps:{innerHTML:t._s(t.book.description)}})],1)],1)],1)],1)],1):t._e()},yo=[],wo={render:xo,staticRenderFns:yo},$o=wo,Io=n("VU/8"),Co=U,Lo=Io(ko,$o,!1,Co,"data-v-574b0d25",null),Uo=Lo.exports,Bo={props:["search"],computed:{books:function(){return this.$store.state.book.foundBooks}},created:function(){var t=this;return O()(S.a.mark(function e(){return S.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.books){e.next=5;break}return t.$store.dispatch("startLoading","app"),e.next=4,t.$store.dispatch("searchBooks",t.search);case 4:t.$store.dispatch("stopLoading","app");case 5:case"end":return e.stop()}},e,t)}))()}},Fo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},t._l(t.books,function(e){return e?n("v-card",{key:e.bookId,staticClass:"mb-2",attrs:{to:"/books/"+e.bookId}},[n("v-layout",{staticClass:"pr-1",attrs:{row:""}},[n("v-flex",{attrs:{xs3:"",md2:""}},[n("v-card-media",{attrs:{src:e.thumbnail,height:"165",contain:""}})],1),t._v(" "),n("v-flex",{staticClass:"text-xs-left ml-2",attrs:{xs10:""}},[n("v-list",{attrs:{"three-line":""}},[n("v-list-tile-content",[n("h3",[t._v(t._s(e.title))]),t._v(" "),n("v-list-tile-sub-title",{staticClass:"grey--text text--darken-1"},[n("span",[t._v(t._s(e.author))]),t._v(" "),n("span",[t._v(t._s(e.publishedYear))]),t._v(" "),n("span",[t._v(t._s("( "+e.publisher+")"))])]),t._v(" "),n("v-container",{staticClass:"pt-2 pb-2"},[n("v-divider")],1),t._v(" "),n("v-list-tile-sub-title",[t._v("\n                  "+t._s(e.description)+"\n                ")])],1)],1)],1)],1)],1):t._e()}))],1)},To=[],Eo={render:Fo,staticRenderFns:To},Mo=Eo,Ro=n("VU/8"),No=B,So=Ro(Bo,Mo,!1,No,null,null),Po=So.exports,Oo={props:["books","label"],data:function(){return{element:null}},watch:{element:function(){this.$emit("onSelectValue",this.element)}},created:function(){var t=this,e=this.books.find(function(e){return e.bookId===t.$route.query.book});e&&(this.element=e)}},Vo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-select",{attrs:{label:t.label,items:t.books,"item-text":"title",chips:"","max-height":"auto",autocomplete:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[n("v-chip",{key:JSON.stringify(e.item.title),staticClass:"chip--select",attrs:{selected:e.selected},on:{input:function(t){e.parent.selectItem(e.item)}}},[n("v-avatar",[n("img",{attrs:{src:e.item.thumbnail}})]),t._v("\n        "+t._s(e.item.title)+"\n      ")],1)]}},{key:"item",fn:function(e){return["object"!=typeof e.item?[n("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[n("v-list-tile-avatar",[n("img",{attrs:{src:e.item.thumbnail}})]),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.title)}}),t._v(" "),n("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.author+" - "+e.item.publishedYear)}})],1)]]}}]),model:{value:t.element,callback:function(e){t.element=e},expression:"element"}})],1)},Ao=[],Do={render:Vo,staticRenderFns:Ao},Wo=Do,qo=n("VU/8"),Ho=F,Qo=qo(Oo,Wo,!1,Ho,null,null),Yo=Qo.exports,Jo={props:["leftImage","rightImage"]},Go=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",[n("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[n("img",{staticStyle:{width:"128px",height:"165px"},attrs:{src:t.leftImage}})]),t._v(" "),n("v-icon",{staticClass:"ma-3",attrs:{large:"",color:"orange darken-2"}},[t._v("compare_arrows")]),t._v(" "),n("v-flex",{staticClass:"text-xs-left",attrs:{xs6:""}},[n("img",{staticStyle:{width:"128px",height:"165px"},attrs:{src:t.rightImage}})])],1)},jo=[],zo={render:Go,staticRenderFns:jo},Xo=zo,Zo=n("VU/8"),Ko=T,tr=Zo(Jo,Xo,!1,Ko,null,null),er=tr.exports,nr={computed:{toReceive:function(){return this.$store.getters.tradeToReceive},toOffer:function(){return this.$store.getters.tradeToOffer},isEnableToTrade:function(){return this.toOfferItem&&this.toReceiveItem},thumbnail:function(){return function(t){return t?t.thumbnail:null}}},data:function(){return{toOfferItem:null,toReceiveItem:null}},methods:{trade:function(){this.isEnableToTrade&&this.$store.dispatch("tradeRequest",{bookId:this.toOfferItem.bookId,bookIdTarget:this.toReceiveItem.bookId,userTarget:this.$route.params.user})},setToOfferItem:function(t){this.toOfferItem=t},setToReceiveItem:function(t){this.toReceiveItem=t}},created:function(){this.$store.dispatch("fetchBooksByField",{commitName:"setTradeToReceive",filters:{ownedBy:this.$route.params.user,requestedBy:this.$store.getters.user.userName}}),this.$store.dispatch("fetchBooksByField",{commitName:"setTradeToOffer",filters:{ownedBy:this.$store.getters.user.userName,requestedBy:this.$route.params.user}})},components:{BookSelect:Yo,BookImage:er}},sr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},[n("book-image",{attrs:{leftImage:t.thumbnail(t.toReceiveItem),rightImage:t.thumbnail(t.toOfferItem)}}),t._v(" "),n("v-layout",{attrs:{column:t.$vuetify.breakpoint.xsOnly}},[n("v-flex",{attrs:{xs12:"",md6:""}},[t.toOffer?n("book-select",{attrs:{books:t.toOffer,label:"select what you going to give"},on:{onSelectValue:t.setToReceiveItem}}):t._e()],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[t.toReceive?n("book-select",{attrs:{books:t.toReceive,label:"select what you want to receive"},on:{onSelectValue:t.setToOfferItem}}):t._e()],1)],1)],1)],1),t._v(" "),n("v-btn",{attrs:{disabled:!t.isEnableToTrade},on:{click:t.trade}},[t._v("TRADE")])],1)},or=[],rr={render:sr,staticRenderFns:or},ir=rr,ar=n("VU/8"),cr=E,ur=ar(nr,ir,!1,cr,null,null),lr=ur.exports,dr=n("NYxO"),fr=function(t){var e=t.from,n=t.data;Ur.dispatch("formError",{msg:n,from:e})},mr=function(t){var e=t.from,n=t.data;Ur.dispatch("formError",{msg:n,from:e})},vr=function(t){var e=t.from,n=t.data;Ur.dispatch("formError",{msg:n,from:e})},hr=function(t){return function(e){if(!e.response)return vr();var n={data:e.response.data,from:t};switch(e.response.status){case 404:fr(n);break;case 400:mr(n);break;default:vr(n)}Ur.dispatch("stopLoading",t)}},pr=function(t,e){return function(n){if(!n)return null;Ur.dispatch("stopLoading",t),n.msg&&Ur.dispatch("formSuccess",{from:t,msg:n.msg}),e&&Ur.dispatch(e,n.data||n)}},gr={state:{user:null},mutations:{setUser:function(t,e){t.user=e},setUserProperty:function(t,e){var n=e.property,s=e.data;t.user[n]=s}},actions:{setUser:function(t,e){return(0,t.commit)("setUser",e)},setUserProperty:function(t,e){return(0,t.commit)("setUserProperty",e)},signIn:function(t,e){var n=(t.commit,e.data),s=e.from;return Ne.auth.signIn(n).then(pr(s,"setUser")).catch(hr(s))},signUp:function(t,e){var n=(t.commit,e.data),s=e.from;return Ne.auth.signUp(n).then(pr(s,"setUser")).catch(hr(s))},signinWithToken:function(t,e){t.commit,e.data,e.from;return Ne.auth.signInWithToken().then().catch()},signOut:function(t){var e=t.commit;return Ne.auth.signOut().then(e("setUser",null))},signInWithSocialRedirect:function(t,e){t.commit;return Ne.auth.getSignInUrl(e).then(function(t){t&&(window.location.href=t.data)})},signInWithGoogle:function(t,e){var n=t.commit;return Ne.auth.signInWithGoogle(e).then(function(t){return n("setUser",t.data)})},updateUserData:function(t,e){var n=(t.commit,e.from),s=e.data;return Ne.user.updateUser(s.property,s.data).then(pr(n,"setUserProperty")).catch(hr(n))}},getters:{isAuthenticated:function(t){return!!t.user},user:function(t){return t.user}}},_r={state:{isLoading:[]},mutations:{startLoading:function(t,e){t.isLoading.push(e)},stopLoading:function(t,e){t.isLoading=t.isLoading.filter(function(t){return t!==e})}},actions:{startLoading:function(t,e){return(0,t.commit)("startLoading",e)},stopLoading:function(t,e){return(0,t.commit)("stopLoading",e)}},getters:{isLoading:function(t){return function(e){return t.isLoading.includes(e)}}}},br=n("Dd8w"),kr=n.n(br),xr={state:{messages:null,formMessage:null,lastFormMessage:null,lastFormMessageType:null},mutations:{setFormMessage:function(t,e){t.formMessage=e.msg,t.lastFormMessage=e.from,t.lastFormMessageType=e.type},clearMessages:function(t){t.formMessage=null,t.messages=null,t.lastFormMessage=null,t.lastFormMessageType=null}},actions:{clearMessages:function(t){return(0,t.commit)("clearMessages")},formSuccess:function(t,e){return(0,t.commit)("setFormMessage",kr()({},e,{type:"success"}))},formError:function(t,e){return(0,t.commit)("setFormMessage",kr()({},e,{type:"error"}))}},getters:{formMessage:function(t){return t.formMessage},lastFormMessage:function(t){return t.lastFormMessage},lastFormMessageType:function(t){return t.lastFormMessageType}}},yr={state:{loadedBooks:{},foundBooks:[],myWishList:[],myBooks:[],tradeToReceive:[],tradeToOffer:[],matchedUsers:[]},mutations:{addBook:function(t,e){t.loadedBooks=kr()({},t.loadedBooks,D()({},e.bookId,e))},setFoundBooks:function(t,e){t.foundBooks=e},setTradeToReceive:function(t,e){t.tradeToReceive=e},setMyBooks:function(t,e){t.myBooks=e},setTradeToOffer:function(t,e){t.tradeToOffer=e},setMyWishList:function(t,e){t.myWishList=e},setMatchedUsers:function(t,e){t.matchedUsers=e}},actions:{fetchBookById:function(t,e){var n=t.commit;return Ne.book.getById(e).then(function(t){return n("addBook",t)}).catch(function(t){return console.log(t)})},fetchBooksByManyIds:function(t,e){var n=t.commit,s=t.getters,o=t.dispatch,r=e.filter(function(t){return!s.bookById(t)});return 1===r.length?o("fetchBookById",r):r.length>1?Ne.book.get({bookId:"$in:"+r.join(",")}).then(function(t){return t.map(function(t){return n("addBook",t)})}):null},registerUserBook:function(t,e){var n=(t.commit,t.dispatch);t.getters;return Ne.book.register(e).then(function(){return n("fetchBookById",e.bookId)})},searchBooks:function(t,e){var n=t.commit;return Ne.book.get({q:e}).then(function(t){return n("setFoundBooks",t)})},getMatchUsers:function(t,e){var n=t.commit;return Ne.book.getMatchUsers(e).then(function(t){return n("setMatchedUsers",t)})},fetchBooksByField:function(t,e){var n=t.commit,s=(t.getters,t.dispatch,e.commitName),o=e.filters;return Ne.book.get(o).then(function(t){if(t&&t.length>0){var e=t.map(function(t){return n("addBook",t),t.bookId});n(s,e)}})}},getters:{books:function(t){return t.loadedBooks},bookById:function(t){var e=t.loadedBooks;return function(t){return e[t]}},myBooks:function(t){var e=t.loadedBooks;return t.myBooks.map(function(t){return e[t]})},myWishList:function(t){var e=t.loadedBooks;return t.myWishList.map(function(t){return e[t]})},tradeToReceive:function(t){var e=t.loadedBooks;return t.tradeToReceive.map(function(t){return e[t]})},tradeToOffer:function(t){var e=t.loadedBooks;return t.tradeToOffer.map(function(t){return e[t]})},matchedUsers:function(t){return t.matchedUsers}}},wr={state:{notifications:null},mutations:{setNotifications:function(t,e){t.notifications=e}},actions:{getNotifications:function(t){var e=t.commit;return Ne.notification.get().then(function(t){return e("setNotifications",t)}).catch(function(t){return console.log(t)})},notificationSeen:function(t,e){t.commit;return Ne.notification.seen(e)},deleteNotification:function(t,e){t.commit;return Ne.notification.delete(e)}},getters:{notifications:function(t){return t.notifications},notSeenCount:function(t){var e=t.notifications;return e?e.filter(function(t){return!t.seen}).length:0}}},$r=n("+6Bu"),Ir=n.n($r),Cr=this,Lr={state:{myPendingTrades:[]},mutations:{setPendingTrades:function(t,e){t.myPendingTrades=e}},actions:{tradeRequest:function(t,e){t.commit;return Ne.trade.create(e).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})},getTrades:function(t,e){var n=t.commit,s=t.dispatch;return Ne.trade.get(e).then(function(){var t=O()(S.a.mark(function t(e){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s("fetchBooksByManyIds",e.map(function(t){return t.bookId}));case 2:n("setPendingTrades",e);case 3:case"end":return t.stop()}},t,Cr)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){return console.log(t)})}},getters:{myPendingTrades:function(t,e){var n=t.myPendingTrades,s=e.books;return n.map(function(t){var e=t.bookId,n=Ir()(t,["bookId"]);return kr()({book:s[e]},n)})}}};V.a.use(dr.a);var Ur=new dr.a.Store({modules:{user:gr,loading:_r,message:xr,book:yr,notification:wr,trade:Lr}}),Br=function(t,e,n){return Ur.getters.isAuthenticated?"auth"===t.name?n({name:"home"}):n():"auth"===t.name?n():void n({name:"home"})};V.a.use(ae.a);var Fr=new ae.a({routes:[{path:"/",name:"home",component:He},{path:"/login",name:"auth",component:Ln,beforeEnter:Br},{path:"/user/settings",name:"user-settings",component:Ss,beforeEnter:Br},{path:"/user/books",name:"user-books",component:Qs},{path:"/auth/authcallback",name:"authcallback",props:function(t){return{code:t.query.code}},component:Sn},{path:"/results",name:"books-result",props:function(t){return{search:t.query.search}},component:Po},{path:"/books/:id",name:"book-details",component:Uo},{path:"/trade/:user",props:function(t){return{book:t.query.bookId}},name:"trade",component:lr},{path:"*",name:"notfound",component:Qn}],mode:"history"}),Tr=n("3EgV"),Er=n.n(Tr),Mr=(n("7zck"),{name:"loading-circle",props:["title","name","type"],computed:{isLoading:function(){return this.$store.getters.isLoading(this.name)}}}),Rr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isLoading?n("v-progress-circular",{attrs:{indeterminate:""}}):n("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.title))])],1)},Nr=[],Sr={render:Rr,staticRenderFns:Nr},Pr=Sr,Or=n("VU/8"),Vr=M,Ar=Or(Mr,Pr,!1,Vr,null,null),Dr=Ar.exports,Wr={name:"form-message",props:["name"],computed:{message:function(){return this.$store.getters.formMessage},lastFormMessage:function(){return this.$store.getters.lastFormMessage===this.name},lastFormMessageType:function(){return this.$store.getters.lastFormMessageType},icon:function(){return this.icons[this.lastFormMessageType]},color:function(){return this.colors[this.lastFormMessageType]}},data:function(){return{colors:{error:"error",success:"success"},icons:{error:"warning",success:"check_circle"}}},destroyed:function(){this.$store.dispatch("clearMessages")}},qr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-alert",{attrs:{transition:"scale-transition",outline:"",color:t.color,icon:t.icon,value:t.lastFormMessage}},[t._v("\n    "+t._s(t.message)+"\n  ")])],1)},Hr=[],Qr={render:qr,staticRenderFns:Hr},Yr=Qr,Jr=n("VU/8"),Gr=R,jr=Jr(Wr,Yr,!1,Gr,null,null),zr=jr.exports;V.a.use(Er.a,{theme:{primary:"#2196f3"}}),V.a.component(zr.name,zr),V.a.component(Dr.name,Dr),V.a.config.productionTip=!1,new V.a({el:"#app",router:Fr,store:Ur,template:"<App/>",components:{App:ie},beforeCreate:function(){var t=this;return O()(S.a.mark(function e(){return S.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Ur.dispatch("startLoading","autoSigning"),t.next=3,Ne.auth.autoSignIn().then(function(t){return t?Ur.dispatch("setUser",t):null});case 3:Ur.dispatch("stopLoading","autoSigning");case 4:case"end":return t.stop()}},e,t)}))()}})},"Q+EQ":function(t,e){},"Q+Zj":function(t,e){},SQRL:function(t,e){},T7Kz:function(t,e){},VsN4:function(t,e){},X0PW:function(t,e){},YQew:function(t,e){},ZaCr:function(t,e){},aViI:function(t,e){},bXF6:function(t,e){},dw3h:function(t,e){},eapX:function(t,e){},iuDI:function(t,e){},l6E2:function(t,e){},mtCO:function(t,e){},q8MD:function(t,e){},tV7J:function(t,e){},v8BH:function(t,e){},vplh:function(t,e){},xgl4:function(t,e){},y5F8:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c346f231544471b15031.js.map