webpackJsonp([1],{"1lsm":function(t,e){},"2mVm":function(t,e){},"3VYN":function(t,e){},"7zck":function(t,e){},"9OrO":function(t,e){},CTPg:function(t,e){},EpVU:function(t,e){},JAgY:function(t,e){},Ks12:function(t,e){},L1cv:function(t,e){},MEyZ:function(t,e){},NHnr:function(t,e,n){"use strict";function s(t){n("q8MD")}function r(t){n("3VYN")}function o(t){n("Ks12")}function a(t){n("d2we")}function i(t){n("YQew")}function c(t){n("bXF6")}function u(t){n("T7Kz")}function l(t){n("v8BH")}function d(t){n("egH7")}function f(t){n("m9dR")}function m(t){n("SQRL")}function v(t){n("L1cv")}function h(t){n("ZaCr")}function p(t){n("JAgY")}function g(t){n("Q+Zj")}function _(t){n("aViI")}function b(t){n("vplh")}function k(t){n("1lsm")}function x(t){n("qT1d")}function y(t){n("2mVm")}function w(t){n("9OrO")}function $(t){n("ZntT")}function L(t){n("dooJ")}function I(t){n("EpVU")}function B(t){n("sDqE")}function U(t){n("fIqz")}function T(t){n("UKKv")}function C(t){n("dxLL")}function R(t){n("ugs3")}function E(t){n("xgl4")}function S(t){n("cR3A")}function F(t){n("CTPg")}function N(t){n("zeV4")}function M(t){n("cz7T")}function V(t){n("Vr4B")}function P(t){n("O0LR")}function O(t){n("VsN4")}function A(t){n("pipM")}function q(t){n("MEyZ")}Object.defineProperty(e,"__esModule",{value:!0});var W=n("Xxa5"),D=n.n(W),z=n("exGp"),H=n.n(z),j=n("7+uW"),Y=n("bOdI"),G=n.n(Y),K={data:function(){return{value:""}},methods:{search:function(){var t=this;return H()(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.value){e.next=2;break}return e.abrupt("return");case 2:return t.$store.dispatch("startLoading","app"),e.next=5,t.$store.dispatch("searchBooks",t.value);case 5:t.$store.dispatch("stopLoading","app"),t.$router.push({name:"books-result",query:{search:t.value}});case 7:case"end":return e.stop()}},e,t)}))()}}},Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",[n("v-flex",{attrs:{xs8:""}},[n("form",{on:{submit:function(e){e.preventDefault(),t.search(e)}}},[n("v-text-field",{staticStyle:{"max-width":"500px","min-width":"128px"},attrs:{clearable:"",light:"",placeholder:"Search","append-icon":"search","append-icon-cb":t.search,solo:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)])],1)},J=[],Q={render:Z,staticRenderFns:J},X=Q,tt=n("VU/8"),et=s,nt=tt(K,X,!1,et,null,null),st=nt.exports,rt={computed:{menuItems:function(){return this.$store.getters.isAuthenticated?[{title:"Logout",icon:"exit_to_app",link:{name:"home"},action:this.logout}]:[{title:"Login",icon:"person",link:{name:"auth"}}]}},methods:{logout:function(){this.$store.dispatch("signOut")}}},ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"inline-flex"}},t._l(t.menuItems,function(e){return n("router-link",{key:e.title,staticStyle:{cursor:"pointer"},attrs:{tag:"div",to:e.link},nativeOn:{click:function(t){e.action&&e.action()}}},[n("v-icon",[t._v(t._s(e.icon))]),t._v(" "),n("div",{staticClass:"caption grey-text"},[t._v(t._s(e.title))])],1)}))},at=[],it={render:ot,staticRenderFns:at},ct=it,ut=n("VU/8"),lt=r,dt=ut(rt,ct,!1,lt,null,null),ft=dt.exports,mt={computed:{user:function(){return this.$store.getters.user}},data:function(){return{items:[{title:"My books",icon:"account_box",link:{name:"user-books"}},{title:"Settings",icon:"settings",link:{name:"user-settings"}}]}},methods:{loggout:function(){this.$store.dispatch("signOut")}}},vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("v-menu",{attrs:{"offset-y":"",origin:"center center",transition:"scale-transition",bottom:""}},[n("v-btn",{attrs:{slot:"activator",small:"",icon:"",flat:""},slot:"activator"},[n("v-icon",[t._v("settings")])],1),t._v(" "),n("v-list",[n("v-container",{staticClass:"pa-3"},[n("v-list-tile",{staticClass:"text-xs-left"},[n("v-list-tile-action",[n("v-icon",[t._v("person")])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v(t._s(t.user.userName))]),t._v(" "),n("v-list-tile-sub-title",[t._v(t._s(t.user.email))])],1)],1),t._v(" "),n("v-divider"),t._v(" "),t._l(t.items,function(e){return n("v-list-tile",{key:e.title,staticClass:"pt-0",attrs:{dense:"",to:e.link?e.link:null}},[e.icon?n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.icon))])],1):t._e(),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("\n            "+t._s(e.title)+"\n          ")])],1)],1)})],2)],1)],1):t._e()},ht=[],pt={render:vt,staticRenderFns:ht},gt=pt,_t=n("VU/8"),bt=o,kt=_t(mt,gt,!1,bt,null,null),xt=kt.exports,yt={computed:{notifications:function(){return this.$store.getters.notifications},notSeenCount:function(){return this.$store.getters.notSeenCount},hasNotifications:function(){return this.notifications&&this.notifications.length>0},hasNewNotifications:function(){return this.notSeenCount>0}},data:function(){return{showMenu:!1}},methods:{seen:function(t){var e=this;return H()(D.a.mark(function n(){return D.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("notificationSeen",t);case 2:e.fetchData();case 3:case"end":return n.stop()}},n,e)}))()},remove:function(t){this.$store.dispatch("deleteNotification",t)},fetchData:function(){this.$store.dispatch("getNotifications")}},created:function(){this.$store.dispatch("getNotifications")}},wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"offset-y":"",origin:"center center","close-on-content-click":!1,transition:"scale-transition",botton:""}},[n("v-badge",{attrs:{slot:"activator",overlap:"",color:"red"},slot:"activator",model:{value:t.hasNewNotifications,callback:function(e){t.hasNewNotifications=e},expression:"hasNewNotifications"}},[n("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(t.notSeenCount))]),t._v(" "),n("v-btn",{attrs:{small:"",icon:"",flat:""},on:{click:t.fetchData}},[n("v-icon",[t._v("notifications")])],1)],1),t._v(" "),n("v-container",{staticClass:"pa-0 elevation-20",staticStyle:{"max-height":"500px",width:"500px"}},[n("v-list",{attrs:{"three-line":""}},[n("v-container",{staticClass:"py-2"},[n("h3",{staticClass:"text-xs-left"},[t._v("Notifications")])]),t._v(" "),n("v-divider"),t._v(" "),t.notifications?n("v-container",t._l(t.notifications,function(e){return n("v-list-tile",{key:e.book,staticClass:"border elevation-1",attrs:{avatar:"",ripple:!0,replace:"",to:{path:"/user/books",query:{tab:"trade_request"===e.type?"My Pending Trades":"My Trades"}}},on:{click:function(n){t.seen(e._id)}}},[n("v-list-tile-avatar",[n("v-icon",{attrs:{color:"green",disabled:e.seen}},[t._v("new_releases")])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",{domProps:{innerHTML:t._s(e.message)}}),t._v(" "),n("v-list-tile-sub-title",[t._v(t._s(e.time))])],1),t._v(" "),n("v-list-tile-action",[n("v-btn",{attrs:{icon:""},on:{click:function(n){n.preventDefault(),t.remove(e._id)}}},[n("v-icon",{attrs:{color:"red"}},[t._v("remove")])],1)],1)],1)})):t._e(),t._v(" "),t.hasNotifications?t._e():n("h4",{staticClass:"ma-3"},[t._v("no new notifications")])],1)],1)],1)},$t=[],Lt={render:wt,staticRenderFns:$t},It=Lt,Bt=n("VU/8"),Ut=a,Tt=Bt(yt,It,!1,Ut,"data-v-33b34142",null),Ct=Tt.exports,Rt={computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated}},components:{LinkItems:ft,Settings:xt,Notifications:Ct}},Et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"inline-flex"}},[t.isAuthenticated?n("div",[n("notifications",{staticClass:"ml-3"}),t._v(" "),n("settings",{staticClass:"ml-3"})],1):t._e(),t._v(" "),n("link-items",{staticClass:"ml-3"})],1)},St=[],Ft={render:Et,staticRenderFns:St},Nt=Ft,Mt=n("VU/8"),Vt=i,Pt=Mt(Rt,Nt,!1,Vt,null,null),Ot=Pt.exports,At={props:["activator"],data:function(){return{items:[{title:"test",icon:"person",link:{name:""}}]}},methods:{test:function(){console.log("lol")}}},qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{fixed:"",app:"",clipped:"","disable-route-watcher":"","disable-resize-watcher":""},model:{value:t.activator,callback:function(e){t.activator=e},expression:"activator"}},[n("v-list",t._l(t.items,function(e){return n("v-list-tile",{key:e.title,staticClass:"pt-0",attrs:{dense:""},on:{click:t.test}},[n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.icon))])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("\n          "+t._s(e.title)+"\n        ")])],1)],1)}))],1)},Wt=[],Dt={render:qt,staticRenderFns:Wt},zt=Dt,Ht=n("VU/8"),jt=c,Yt=Ht(At,zt,!1,jt,null,null),Gt=Yt.exports,Kt={name:"app-toolbar",data:function(){return{nav:!1}},components:{Search:st,ToolbarItems:Ot,Navigation:Gt}},Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spacing"},[n("navigation",{attrs:{activator:t.nav}}),t._v(" "),n("v-toolbar",{attrs:{color:"primary",dark:"",dense:"",fixed:"",app:"","clipped-left":"",dense:!1}},[n("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.nav=!t.nav}}}),t._v(" "),n("v-toolbar-title",{staticClass:"mr-5"},[n("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:{name:"home"},tag:"span"}},[t._v("\n        CoolBook\n      ")])],1),t._v(" "),n("search"),t._v(" "),n("v-spacer"),t._v(" "),n("toolbar-items")],1)],1)},Jt=[],Qt={render:Zt,staticRenderFns:Jt},Xt=Qt,te=n("VU/8"),ee=u,ne=te(Kt,Xt,!1,ee,"data-v-2f0250fe",null),se=ne.exports,re={name:"app",computed:{isLoading:function(){return this.$store.getters.isLoading("app")},isAutoSigning:function(){return this.$store.getters.isLoading("autoSigning")},route:function(){return this.$route.fullPath}},components:G()({},se.name,se)},oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isAutoSigning?t._e():n("v-app",[n("app-toolbar"),t._v(" "),t.isLoading?n("v-progress-linear",{staticClass:"mt-0",attrs:{indeterminate:!0,height:"3"}}):t._e(),t._v(" "),n("router-view",{key:t.route,staticClass:"mt-3"})],1)},ae=[],ie={render:oe,staticRenderFns:ae},ce=ie,ue=n("VU/8"),le=l,de=ue(re,ce,!1,le,null,null),fe=de.exports,me=n("/ocq"),ve={props:["books"]},he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.books?n("v-layout",[n("v-flex",{attrs:{xs10:"","offset-xs1":""}},[n("v-container",{attrs:{fluid:"","grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.books,function(e){return n("v-flex",{key:e.bookId,attrs:{md2:"",xs12:""}},[n("v-card",{attrs:{hover:"",to:"/books/"+e.bookId}},[n("v-container",[n("div",{staticStyle:{"max-width":"128px","max-height":"175px",margin:"auto"}},[n("v-card-media",{attrs:{src:e.thumbnail,height:"175px"}})],1)]),t._v(" "),n("v-list",[n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"text-xs-center"},[t._v(" "+t._s(e.title))])],1)],1)],1)],1)],1)}))],1)],1)],1):t._e()},pe=[],ge={render:he,staticRenderFns:pe},_e=ge,be=n("VU/8"),ke=d,xe=be(ve,_e,!1,ke,null,null),ye=xe.exports,we={computed:{books:function(){return this.$store.getters.books}},created:function(){this.$store.dispatch("fetchBooksByField")},components:{BooksShow:ye}},$e=function(){var t=this,e=t.$createElement;return(t._self._c||e)("books-show",{attrs:{books:t.books}})},Le=[],Ie={render:$e,staticRenderFns:Le},Be=Ie,Ue=n("VU/8"),Te=f,Ce=Ue(we,Be,!1,Te,"data-v-72814a40",null),Re=Ce.exports,Ee={data:function(){return{form:"register",email:"",password:"",userName:"",gender:"",genderOptions:[{value:"female",text:"Female"},{value:"male",text:"Male"},{value:"other",text:"Other"}]}},computed:{isLoading:function(){return this.$store.getters.isLoading(this.form)}},methods:{signUp:function(){this.$store.dispatch("signUp",{data:{email:this.email,password:this.password,gender:this.gender,userName:this.userName},from:this.form}),this.$store.dispatch("startLoading",this.form)}}},Se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs12:"",md10:"","offset-md1":""}},[n("form",{on:{submit:function(e){e.preventDefault(),t.signUp(e)}}},[n("v-card-title",[n("h1",[t._v("Register")])]),t._v(" "),n("form-message",{attrs:{name:t.form}}),t._v(" "),n("v-card-text",[n("v-layout",{attrs:{column:t.$vuetify.breakpoint.xsOnly}},[n("v-flex",{attrs:{xs12:"",md5:""}},[n("v-text-field",{attrs:{label:"Email",placeholder:"you@example.com"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),n("v-text-field",{attrs:{placeholder:"Create a Password",label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-flex",{attrs:{xs12:"",md5:""}},[n("v-text-field",{attrs:{label:"Username",placeholder:"Pick a username"},model:{value:t.userName,callback:function(e){t.userName=e},expression:"userName"}}),t._v(" "),n("v-select",{attrs:{label:"Gender","persistent-hint":"",items:t.genderOptions},model:{value:t.gender,callback:function(e){t.gender=e},expression:"gender"}})],1)],1)],1),t._v(" "),n("v-flex",{attrs:{xs5:"","offset-xs3":""}},[n("v-btn",{attrs:{disabled:t.isLoading,color:"primary",block:"",type:"submit"}},[n("loading-circle",{attrs:{name:t.form,title:"Register"}})],1)],1)],1)])],1)],1)},Fe=[],Ne={render:Se,staticRenderFns:Fe},Me=Ne,Ve=n("VU/8"),Pe=m,Oe=Ve(Ee,Me,!1,Pe,"data-v-2bbb376b",null),Ae=Oe.exports,qe={methods:{signIn:function(){this.$store.dispatch("signInWithSocialRedirect","google")}}},We=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-btn",{staticClass:"normalcase",attrs:{color:"red",dark:""},on:{click:t.signIn}},[n("span",{staticClass:"g"},[t._v("g")]),t._v("\n  +\n  "),n("div",{staticClass:"divisor"}),t._v("\n  Sign in with Google\n")])},De=[],ze={render:We,staticRenderFns:De},He=ze,je=n("VU/8"),Ye=v,Ge=je(qe,He,!1,Ye,"data-v-5b7b974a",null),Ke=Ge.exports,Ze={computed:{isLoading:function(){return this.$store.getters.isLoading(this.form)}},data:function(){return{form:"login",email:"",password:""}},methods:{signIn:function(){this.$store.dispatch("signIn",{data:{email:this.email,password:this.password},from:this.form}),this.$store.dispatch("startLoading",this.form)}},components:{LoginGoogle:Ke}},Je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",[n("form",{on:{submit:function(e){e.preventDefault(),t.signIn(e)}}},[n("v-card-title",[n("div",{staticClass:"text-xs-left"},[n("h1",[t._v("Login")]),t._v(" "),n("p",{staticClass:"grey--text"},[t._v("Already have an account? Sign in here below!")])])]),t._v(" "),n("form-message",{attrs:{name:t.form}}),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),n("v-text-field",{attrs:{label:"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("v-btn",{attrs:{disabled:t.isLoading,color:"primary",type:"submit"}},[n("loading-circle",{attrs:{name:t.form,title:"Login"}})],1)],1),t._v(" "),n("login-google")],1)],1)],1)},Qe=[],Xe={render:Je,staticRenderFns:Qe},tn=Xe,en=n("VU/8"),nn=h,sn=en(Ze,tn,!1,nn,"data-v-7c4e304b",null),rn=sn.exports,on={computed:{isNotLoggedIn:function(){return!this.$store.getters.isAuthenticated||(this.$router.push({name:"home"}),!1)}},data:function(){return{}},components:{Register:Ae,Login:rn}},an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isNotLoggedIn?n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs12:"",md10:"","offset-md1":""}},[n("v-card",[n("v-layout",{attrs:{row:"",column:t.$vuetify.breakpoint.xsOnly}},[n("v-flex",{attrs:{lg8:"",xs12:""}},[n("register")],1),t._v(" "),n("div",{staticClass:"vdivisor"}),t._v(" "),n("v-flex",{attrs:{lg4:"",xs12:""}},[n("login")],1)],1)],1)],1)],1)],1):t._e()},cn=[],un={render:an,staticRenderFns:cn},ln=un,dn=n("VU/8"),fn=p,mn=dn(on,ln,!1,fn,null,null),vn=mn.exports,hn={props:["code"],computed:{isAuthenticated:function(){return!this.$store.getters.isAuthenticated}},methods:{goToHome:function(){this.$router.push({name:"home"})}},created:function(){this.code||this.goToHome(),this.$store.dispatch("signInWithGoogle",this.code)}},pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-dialog",{attrs:{fullscreen:"",overlay:!0,scrollable:""},model:{value:t.isAuthenticated,callback:function(e){t.isAuthenticated=e},expression:"isAuthenticated"}},[n("v-card",[n("h3",[t._v("Loading...")]),t._v(" "),t.isAuthenticated?t._e():n("div",[t._v(t._s(t.goToHome()))])])],1)],1)},gn=[],_n={render:pn,staticRenderFns:gn},bn=_n,kn=n("VU/8"),xn=g,yn=kn(hn,bn,!1,xn,null,null),wn=yn.exports,$n={},Ln=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._v("\n  NOT FOUND\n")])},In=[],Bn={render:Ln,staticRenderFns:In},Un=Bn,Tn=n("VU/8"),Cn=_,Rn=Tn($n,Un,!1,Cn,null,null),En=Rn.exports,Sn={data:function(){return{Items:[{title:"Overview",icon:"account_box",name:"overview"},{title:"Password",icon:"vpn_key",name:"password"},{title:"Email",icon:"email",name:"email"}]}},methods:{itemChoose:function(t){this.$emit("itemChoose",t)}}},Fn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",[n("v-list",t._l(t.Items,function(e){return n("v-list-tile",{key:e.name,staticClass:"pt-0",attrs:{dense:""},on:{click:function(n){t.itemChoose(e.name)}}},[e.icon?n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.icon))])],1):t._e(),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v("\r\n              "+t._s(e.title)+"\r\n            ")])],1)],1)}))],1)],1)],1)},Nn=[],Mn={render:Fn,staticRenderFns:Nn},Vn=Mn,Pn=n("VU/8"),On=b,An=Pn(Sn,Vn,!1,On,null,null),qn=An.exports,Wn={computed:{isEditing:function(){var t=this;return function(e){return t.editField===e}},user:function(){var t=this.$store.getters.user;return[{label:"User Name",value:t.userName,name:"userName",editable:!1},{label:"Email address",value:t.email,name:"email",editable:!1},{label:"City",value:t.city,name:"city",editable:!0},{label:"State",value:t.state,name:"state",editable:!0}]},isLoading:function(){var t=this;return function(e){return t.$store.getters.isLoading(e)}}},data:function(){return{editField:null}},methods:{edit:function(t,e){var n=this;return H()(D.a.mark(function s(){return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n.$store.dispatch("startLoading",t),s.next=3,n.$store.dispatch("updateUserData",{from:"overview",data:{property:t,data:e}});case 3:n.$store.dispatch("stopLoading",t),n.editField=null;case 5:case"end":return s.stop()}},s,n)}))()}}},Dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user?n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs6:""}},[n("v-card",{staticClass:"pa-5"},[n("v-card-title",[n("div",{staticClass:"text-xs-left"},[n("h1",[t._v("Overview")])])]),t._v(" "),n("v-card-text",[n("v-divider"),t._v(" "),n("form",[n("form-message",{attrs:{name:"overview"}}),t._v(" "),t._l(t.user,function(e){return n("v-text-field",{key:e.value,class:t.isEditing(e.name)?"input-group--focused":"",attrs:{label:e.label,"append-icon":e.editable?"edit":"","append-icon-cb":function(){return t.editField=e.name},readonly:!t.isEditing(e.name),loading:!!t.isLoading(e.name)&&"green",autofocus:t.isEditing(e.name)},on:{keyup:function(n){if(!("button"in n)&&t._k(n.keyCode,"enter",13,n.key))return null;t.isEditing(e.name)&&t.edit(e.name,e.value)}},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}})})],2)],1)],1)],1)],1)],1):t._e()},zn=[],Hn={render:Dn,staticRenderFns:zn},jn=Hn,Yn=n("VU/8"),Gn=k,Kn=Yn(Wn,jn,!1,Gn,null,null),Zn=Kn.exports,Jn={computed:{isLoading:function(){return this.$store.getters.isLoading(this.form)}},data:function(){return{form:"changeEmail",newEmail:"",password:""}},methods:{changeEmail:function(){this.$store.dispatch("updateUserData",{data:{property:"email",data:{password:this.password,newEmail:this.newEmail}},from:this.form}),this.$store.dispatch("startLoading",this.form)}}},Qn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs6:""}},[n("v-card",{staticClass:"pa-5"},[n("form",{on:{submit:function(e){e.preventDefault(),t.changeEmail(e)}}},[n("v-card-title",[n("div",{staticClass:"text-xs-left"},[n("h1",[t._v("Change Email")])])]),t._v(" "),n("v-divider"),t._v(" "),n("form-message",{attrs:{name:t.form}}),t._v(" "),n("v-card-text",[n("v-text-field",{staticClass:"mb-4",attrs:{label:"Current e-mail address",readonly:""},model:{value:t.$store.getters.user.email,callback:function(e){t.$set(t.$store.getters.user,"email",e)},expression:"$store.getters.user.email"}}),t._v(" "),n("v-text-field",{attrs:{label:"New e-mail address"},model:{value:t.newEmail,callback:function(e){t.newEmail=e},expression:"newEmail"}}),t._v(" "),n("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),n("v-btn",{attrs:{disabled:t.isLoading,type:"submit",color:"primary"}},[n("loading-circle",{attrs:{name:t.form,title:"Save"}})],1)],1)])],1)],1)],1)},Xn=[],ts={render:Qn,staticRenderFns:Xn},es=ts,ns=n("VU/8"),ss=x,rs=ns(Jn,es,!1,ss,null,null),os=rs.exports,as={computed:{isLoading:function(){return this.$store.getters.isLoading(this.form)}},data:function(){return{form:"changePassword",password:"",newPassword:"",confirmPassword:""}},methods:{changePassword:function(){this.$store.dispatch("updateUserData",{data:{property:"password",data:{password:this.password,newPassword:this.newPassword,confirmPassword:this.confirmPassword}},from:this.form}),this.$store.dispatch("startLoading",this.form)}}},is=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs6:""}},[n("v-card",{staticClass:"pa-5"},[n("form",{on:{submit:function(e){e.preventDefault(),t.changePassword(e)}}},[n("v-card-title",[n("div",{staticClass:"text-xs-left"},[n("h1",[t._v("Change Password")])])]),t._v(" "),n("v-divider"),t._v(" "),n("form-message",{attrs:{name:t.form}}),t._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Current password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),n("v-text-field",{attrs:{label:"New password",type:"password"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),t._v(" "),n("v-text-field",{attrs:{label:"Confirm password",type:"password"},model:{value:t.confirmPassword,callback:function(e){t.confirmPassword=e},expression:"confirmPassword"}})],1),t._v(" "),n("v-btn",{attrs:{disabled:t.isLoading,type:"submit",color:"primary"}},[n("loading-circle",{attrs:{name:t.form,title:"Save"}})],1)],1)])],1)],1)],1)},cs=[],us={render:is,staticRenderFns:cs},ls=us,ds=n("VU/8"),fs=y,ms=ds(as,ls,!1,fs,null,null),vs=ms.exports,hs={data:function(){return{menuItem:"overview"}},methods:{chosen:function(t){this.menuItem=t}},components:{MenuItems:qn,Overview:Zn,ChangeEmail:os,ChangePassword:vs}},ps=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs3:""}},[n("menu-items",{on:{itemChoose:t.chosen}})],1),t._v(" "),n("v-flex",{attrs:{xs8:""}},["overview"===t.menuItem?n("overview"):t._e(),t._v(" "),"email"===t.menuItem?n("change-email"):t._e(),t._v(" "),"password"===t.menuItem?n("change-password"):t._e()],1)],1)],1)},gs=[],_s={render:ps,staticRenderFns:gs},bs=_s,ks=n("VU/8"),xs=w,ys=ks(hs,bs,!1,xs,null,null),ws=ys.exports,$s={props:["name"],computed:{isLoading:function(){return this.$store.getters.isLoading(this.name)}}},Ls=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tabs-content",{attrs:{id:t.name}},[n("v-card",{attrs:{flat:""}},[t.isLoading?n("v-progress-circular",{staticClass:"mt-5",attrs:{indeterminate:"",color:"red",size:"100"}}):n("div",[t._t("default")],2)],1)],1)},Is=[],Bs={render:Ls,staticRenderFns:Is},Us=Bs,Ts=n("VU/8"),Cs=$,Rs=Ts($s,Us,!1,Cs,null,null),Es=Rs.exports,Ss={props:["name"],computed:{myBooks:function(){return this.$store.getters.myBooks}},components:{TabContent:Es,BooksShow:ye}},Fs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tab-content",{attrs:{name:t.name}},[n("books-show",{attrs:{books:t.myBooks}})],1)},Ns=[],Ms={render:Fs,staticRenderFns:Ns},Vs=Ms,Ps=n("VU/8"),Os=L,As=Ps(Ss,Vs,!1,Os,null,null),qs=As.exports,Ws={props:["name"],computed:{myWishList:function(){return this.$store.getters.myWishList}},components:{TabContent:Es,BooksShow:ye}},Ds=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tab-content",{attrs:{name:t.name}},[n("books-show",{attrs:{books:t.myWishList}})],1)},zs=[],Hs={render:Ds,staticRenderFns:zs},js=Hs,Ys=n("VU/8"),Gs=I,Ks=Ys(Ws,js,!1,Gs,null,null),Zs=Ks.exports,Js={props:["leftImage","rightImage"]},Qs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",[n("v-flex",{staticClass:"text-xs-right",attrs:{xs6:""}},[n("img",{staticStyle:{width:"128px",height:"165px"},attrs:{src:t.leftImage}})]),t._v(" "),n("v-icon",{staticClass:"ma-3",attrs:{large:"",color:"orange darken-2"}},[t._v("compare_arrows")]),t._v(" "),n("v-flex",{staticClass:"text-xs-left",attrs:{xs6:""}},[n("img",{staticStyle:{width:"128px",height:"165px"},attrs:{src:t.rightImage}})])],1)},Xs=[],tr={render:Qs,staticRenderFns:Xs},er=tr,nr=n("VU/8"),sr=B,rr=nr(Js,er,!1,sr,null,null),or=rr.exports,ar={props:["trade"],components:{BookImage:or}},ir=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{attrs:{md3:"",xs12:""}},[n("v-card",{staticClass:"pa-2"},[n("book-image",{attrs:{rightImage:t.trade.book.thumbnail,leftImage:t.trade.bookTarget.thumbnail}}),t._v(" "),t._t("default")],2)],1)},cr=[],ur={render:ir,staticRenderFns:cr},lr=ur,dr=n("VU/8"),fr=U,mr=dr(ar,lr,!1,fr,"data-v-69715fff",null),vr=mr.exports,hr={props:["name"],computed:{tradesPending:function(){return this.$store.getters.tradesPending},user:function(){return this.$store.getters.user.userName}},methods:{answer:function(t,e){var n=this;return H()(D.a.mark(function s(){return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n.$store.dispatch("startLoading",n.name),s.next=3,n.$store.dispatch("tradeAnswer",{id:t,answer:e});case 3:n.$store.dispatch("stopLoading",n.name);case 4:case"end":return s.stop()}},s,n)}))()}},components:{BooksTrade:vr,TabContent:Es}},pr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tab-content",{attrs:{name:t.name}},[n("v-container",{attrs:{fluid:"","grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.tradesPending,function(e){return n("books-trade",{key:e._id,attrs:{trade:e}},[n("v-card-title",{attrs:{"primary-title":""}},[n("div",{staticClass:"text-xs-left",staticStyle:{"max-width":"100%"}},[n("p",{staticClass:"ma-0 text"},[n("span",{staticStyle:{"font-weight":"600","font-size":"17px"}},[t._v(t._s(e.user))]),t._v(" want to trade his\n                "),n("a",{attrs:{href:"books/"+e.book.bookId}},[t._v(t._s(e.book.title))])]),t._v(" "),n("p",{staticClass:"ma-0 text"},[t._v("to yours\n                "),n("a",{attrs:{href:"books/"+e.bookTarget.bookId}},[t._v(t._s(e.bookTarget.title))])])])]),t._v(" "),n("v-card-actions",[t.user===e.user?n("div",[n("v-btn",{attrs:{outline:"",color:"red"},on:{click:function(n){t.answer(e._id,"cancel")}}},[t._v("cancel")])],1):n("div",[n("v-btn",{attrs:{outline:"",color:"green"},on:{click:function(n){t.answer(e._id,"accept")}}},[t._v("accept")]),t._v(" "),n("v-btn",{attrs:{outline:"",color:"red"},on:{click:function(n){t.answer(e._id,"reject")}}},[t._v("decline")])],1)])],1)}))],1)],1)},gr=[],_r={render:pr,staticRenderFns:gr},br=_r,kr=n("VU/8"),xr=T,yr=kr(hr,br,!1,xr,"data-v-105226b3",null),wr=yr.exports,$r={props:["name"],computed:{tradesResolved:function(){return this.$store.getters.trades}},components:{BooksTrade:vr,TabContent:Es}},Lr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tab-content",{attrs:{name:t.name}},[n("v-container",{attrs:{fluid:"","grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},t._l(t.tradesResolved,function(e){return n("books-trade",{key:e._id,attrs:{trade:e}},[n("v-card-text",{staticClass:"text-xs-left"},[n("p",[t._v(" requested by: "),n("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.user))])]),t._v(" "),n("p",[t._v("to: "),n("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(e.userTarget))])]),t._v(" "),n("p",[t._v(" status: "),n("span",{class:("accept"===e.status?"green":"red")+"--text"},[t._v(t._s(e.status))])])])],1)}))],1)],1)},Ir=[],Br={render:Lr,staticRenderFns:Ir},Ur=Br,Tr=n("VU/8"),Cr=C,Rr=Tr($r,Ur,!1,Cr,null,null),Er=Rr.exports,Sr={computed:{tabs:function(){return[{name:"My Books"},{name:"My Wish List"},{name:"My Pending Trades"},{name:"My Trades"}]}},data:function(){return{active:null}},methods:{fetch:function(t,e){var n=this;return H()(D.a.mark(function s(){return D.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n.$store.dispatch("startLoading",n.active),s.next=3,n.$store.dispatch(t,e);case 3:n.$store.dispatch("stopLoading",n.active);case 4:case"end":return s.stop()}},s,n)}))()}},watch:{active:function(){switch(this.active){case"My Books":this.fetch("myBooks");break;case"My Wish List":this.fetch("myWishList");break;case"My Pending Trades":case"My Trades":this.fetch("getTrades")}}},created:function(){var t=this.$route.query.tab;this.active=t},components:{PendingTrades:wr,MyBooks:qs,WishList:Zs,ResolvedTrades:Er}},Fr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("v-tabs-bar",{attrs:{color:"blue",dark:""}},[t._l(t.tabs,function(e){return n("v-tabs-item",{key:e.name,attrs:{href:"#"+e.name,ripple:""}},[n("h4",{staticStyle:{"text-transform":"none"}},[t._v(t._s(e.name))])])}),t._v(" "),n("v-tabs-slider",{attrs:{color:"yellow"}})],2),t._v(" "),n("v-tabs-items",[n("my-books",{attrs:{name:"My Books"}}),t._v(" "),n("wish-list",{attrs:{name:"My Wish List"}}),t._v(" "),n("pending-trades",{attrs:{name:"My Pending Trades"}}),t._v(" "),n("resolved-trades",{attrs:{name:"My Trades"}})],1)],1)],1)},Nr=[],Mr={render:Fr,staticRenderFns:Nr},Vr=Mr,Pr=n("VU/8"),Or=R,Ar=Pr(Sr,Vr,!1,Or,null,null),qr=Ar.exports,Wr={},Dr=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},zr=[],Hr={render:Dr,staticRenderFns:zr},jr=Hr,Yr=n("VU/8"),Gr=E,Kr=Yr(Wr,jr,!1,Gr,"data-v-55ebcdf0",null),Zr=Kr.exports,Jr={props:["name","book","color","icon"],computed:{count:function(){return this.book[this.name+"Count"]},showBadge:function(){return this.count>0},isBookmarked:function(){return!!Array.isArray(this.book[this.name])&&this.book[this.name].includes(this.$store.getters.user.userName)},isLoading:function(){return this.$store.getters.isLoading("bookAction")}},data:function(){return{show:!1}},methods:{register:function(){var t=this;return H()(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.dispatch("startLoading","bookAction"),e.next=3,t.$store.dispatch("registerUserBook",{type:t.name,bookId:t.book.bookId});case 3:t.$store.dispatch("stopLoading","bookAction");case 4:case"end":return e.stop()}},e,t)}))()}},components:{NotificationDialog:Zr}},Qr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mr-4"},[n("v-tooltip",{attrs:{top:""}},[n("v-badge",{attrs:{slot:"activator",right:""},slot:"activator",model:{value:t.showBadge,callback:function(e){t.showBadge=e},expression:"showBadge"}},[n("span",{attrs:{slot:"badge"},slot:"badge"},[t._v(t._s(t.count))]),t._v(" "),n("v-btn",{staticClass:"ma-0",attrs:{disabled:t.isLoading,icon:""},on:{click:t.register}},[n("v-icon",{attrs:{large:"",color:t.color,disabled:!t.isBookmarked}},[t._v(t._s(this.icon))])],1)],1),t._v(" "),n("span",[t._v("add to your "+t._s("ownedBy"===this.name?"books":"wish list"))])],1)],1)},Xr=[],to={render:Qr,staticRenderFns:Xr},eo=to,no=n("VU/8"),so=S,ro=no(Jr,eo,!1,so,null,null),oo=ro.exports,ao={props:["bookId"],computed:{matchedUsers:function(){return this.$store.getters.matchedUsers},isLoading:function(){return this.$store.getters.isLoading("matchUsers")}},methods:{getMatchUsers:function(){var t=this;return H()(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.dispatch("startLoading","matchUsers"),e.next=3,t.$store.dispatch("getMatchUsers",t.bookId);case 3:t.$store.dispatch("stopLoading","matchUsers");case 4:case"end":return e.stop()}},e,t)}))()}}},io=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-xs-center"},[n("v-menu",{attrs:{top:"","offset-y":""}},[n("v-btn",{attrs:{slot:"activator",outline:"",color:"indigo"},on:{click:t.getMatchUsers},slot:"activator"},[t._v("People that you can trade with")]),t._v(" "),!t.isLoading&&t.matchedUsers&&t.matchedUsers.length>0?n("v-list",t._l(t.matchedUsers,function(e,s){return n("v-list-tile",{key:s,attrs:{to:{name:"trade",params:{user:e},query:{book:t.bookId}}}},[n("v-list-tile-title",[t._v(t._s(e))])],1)})):n("v-list",[n("v-list-tile",[t.isLoading?n("v-list-tile-title",{staticClass:"text-xs-center"},[n("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):n("v-list-tile-title",{staticClass:"text-xs-center"},[t._v(" Sorry, no match for you today !")])],1)],1)],1)],1)},co=[],uo={render:io,staticRenderFns:co},lo=uo,fo=n("VU/8"),mo=F,vo=fo(ao,lo,!1,mo,null,null),ho=vo.exports,po={computed:{book:function(){return this.$store.getters.bookById(this.$route.params.id)},isLoading:function(){return this.$store.getters.isLoading("app")}},data:function(){return{show:!1}},created:function(){var t=this;return H()(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.book){e.next=5;break}return t.$store.dispatch("startLoading","app"),e.next=4,t.$store.dispatch("fetchBookById",t.$route.params.id);case 4:t.$store.dispatch("stopLoading","app");case 5:case"end":return e.stop()}},e,t)}))()},components:{Action:oo,MatchUsers:ho}},go=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.book&&!t.isLoading?n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[n("v-card",[n("v-container",{staticClass:"elevation-8"},[n("v-flex",[n("img",{staticStyle:{width:"300px",height:"411px"},attrs:{src:t.book.url_image}})]),t._v(" "),n("v-container",[n("v-divider")],1),t._v(" "),n("v-layout",[n("v-flex",[n("v-card-title",[n("div",{staticClass:"text-xs-left"},[n("div",{staticClass:"headline"},[t._v(t._s(t.book.title))]),t._v(" "),n("p",{staticClass:"grey--text"},[t._v(" Author: "+t._s(t.book.author))]),t._v(" "),n("p",{staticClass:"grey--text"},[t._v(" Publisher: "+t._s(t.book.publisher))]),t._v(" "),n("p",{staticClass:"grey--text"},[t._v(" Published on: "+t._s(t.book.publishedDate))])])])],1),t._v(" "),n("v-flex",{staticClass:"mt-5"},[n("v-card-actions",[n("v-spacer"),t._v(" "),n("dialog-message",{attrs:{name:"register"}}),t._v(" "),n("action",{attrs:{icon:"favorite",name:"requestedBy",color:"red",book:this.book}}),t._v(" "),n("action",{attrs:{icon:"turned_in",name:"ownedBy",color:"green",book:this.book}})],1)],1)],1),t._v(" "),n("match-users",{attrs:{bookId:t.book.bookId}}),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){t.show=!t.show}}},[n("v-icon",[t._v(t._s(t.show?"keyboard_arrow_down":"keyboard_arrow_up"))])],1)],1),t._v(" "),n("v-slide-y-transition",[n("v-card-text",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"text-xs-left",domProps:{innerHTML:t._s(t.book.description)}})],1)],1)],1)],1)],1):t._e()},_o=[],bo={render:go,staticRenderFns:_o},ko=bo,xo=n("VU/8"),yo=N,wo=xo(po,ko,!1,yo,"data-v-72afb2b5",null),$o=wo.exports,Lo={props:["search"],computed:{books:function(){return this.$store.state.book.foundBooks}},created:function(){var t=this;return H()(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.books){e.next=5;break}return t.$store.dispatch("startLoading","app"),e.next=4,t.$store.dispatch("searchBooks",t.search);case 4:t.$store.dispatch("stopLoading","app");case 5:case"end":return e.stop()}},e,t)}))()}},Io=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},[n("form-message",{attrs:{name:"search"}}),t._v(" "),t._l(t.books,function(e){return e?n("v-card",{key:e.bookId,staticClass:"mb-2",attrs:{to:"/books/"+e.bookId}},[n("v-layout",{staticClass:"pr-1",attrs:{row:""}},[n("v-flex",{attrs:{xs3:"",md2:""}},[n("v-card-media",{attrs:{src:e.thumbnail,height:"165",contain:""}})],1),t._v(" "),n("v-flex",{staticClass:"text-xs-left ml-2",attrs:{xs10:""}},[n("v-list",{attrs:{"three-line":""}},[n("v-list-tile-content",[n("h3",[t._v(t._s(e.title))]),t._v(" "),n("v-list-tile-sub-title",{staticClass:"grey--text text--darken-1"},[n("span",[t._v(t._s(e.author))]),t._v(" "),n("span",[t._v(t._s(e.publishedYear))]),t._v(" "),n("span",[t._v(t._s("( "+e.publisher+")"))])]),t._v(" "),n("v-container",{staticClass:"pt-2 pb-2"},[n("v-divider")],1),t._v(" "),n("v-list-tile-sub-title",[t._v("\n                  "+t._s(e.description)+"\n                ")])],1)],1)],1)],1)],1):t._e()})],2)],1)},Bo=[],Uo={render:Io,staticRenderFns:Bo},To=Uo,Co=n("VU/8"),Ro=M,Eo=Co(Lo,To,!1,Ro,null,null),So=Eo.exports,Fo={props:["books","label","ownedBy","requestedBy","commitName"],data:function(){return{element:null}},computed:{},watch:{element:function(){this.$emit("onSelectValue",this.element)}},created:function(){var t=this;return H()(D.a.mark(function e(){var n;return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("fetchBooksByField",{commitName:t.commitName,filters:{ownedBy:t.ownedBy,requestedBy:t.requestedBy}});case 2:n=t.books.find(function(e){return e.bookId===t.$route.query.book}),n&&(t.element=n);case 4:case"end":return e.stop()}},e,t)}))()}},No=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-select",{attrs:{label:t.label,items:t.books,"item-text":"title",chips:"","max-height":"auto",autocomplete:""},scopedSlots:t._u([{key:"selection",fn:function(e){return[n("v-chip",{key:JSON.stringify(e.item.title),staticClass:"chip--select",attrs:{selected:e.selected},on:{input:function(t){e.parent.selectItem(e.item)}}},[n("v-avatar",[n("img",{attrs:{src:e.item.thumbnail}})]),t._v("\n        "+t._s(e.item.title)+"\n      ")],1)]}},{key:"item",fn:function(e){return["object"!=typeof e.item?[n("v-list-tile-content",{domProps:{textContent:t._s(e.item)}})]:[n("v-list-tile-avatar",[n("img",{attrs:{src:e.item.thumbnail}})]),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",{domProps:{innerHTML:t._s(e.item.title)}}),t._v(" "),n("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.item.author+" - "+e.item.publishedYear)}})],1)]]}}]),model:{value:t.element,callback:function(e){t.element=e},expression:"element"}})],1)},Mo=[],Vo={render:No,staticRenderFns:Mo},Po=Vo,Oo=n("VU/8"),Ao=V,qo=Oo(Fo,Po,!1,Ao,null,null),Wo=qo.exports,Do={computed:{toReceive:function(){return this.$store.getters.tradeToReceive},toOffer:function(){return this.$store.getters.tradeToOffer},isEnableToTrade:function(){return this.toOfferItem&&this.toReceiveItem},thumbnail:function(){return function(t){return t?t.thumbnail:null}},user:function(){return this.$store.getters.user.userName},userParam:function(){return this.$route.params.user}},data:function(){return{toOfferItem:null,toReceiveItem:null}},methods:{trade:function(){var t=this;return H()(D.a.mark(function e(){return D.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isEnableToTrade){e.next=2;break}return e.abrupt("return");case 2:return t.$store.dispatch("startLoading","trade_request"),e.next=5,t.$store.dispatch("tradeRequest",{bookId:t.toOfferItem.bookId,bookIdTarget:t.toReceiveItem.bookId,userTarget:t.$route.params.user});case 5:t.$store.dispatch("stopLoading","trade_request");case 6:case"end":return e.stop()}},e,t)}))()},setToOfferItem:function(t){this.toOfferItem=t},setToReceiveItem:function(t){this.toReceiveItem=t}},components:{BookSelect:Wo,BookImage:or}},zo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},[n("v-card",[n("v-container",{attrs:{fluid:""}},[n("book-image",{attrs:{leftImage:t.thumbnail(t.toOfferItem),rightImage:t.thumbnail(t.toReceiveItem)}}),t._v(" "),n("v-layout",{attrs:{column:t.$vuetify.breakpoint.xsOnly}},[n("v-flex",{attrs:{xs12:"",md6:""}},[t.toReceive?n("book-select",{attrs:{books:t.toReceive,label:"select what you want to receive",ownedBy:t.userParam,requestedBy:t.user,commitName:"setTradeToReceive"},on:{onSelectValue:t.setToOfferItem}}):t._e()],1),t._v(" "),n("v-flex",{attrs:{xs12:"",md6:""}},[t.toOffer?n("book-select",{attrs:{books:t.toOffer,label:"select what you going to give",ownedBy:t.user,requestedBy:t.userParam,commitName:"setTradeToOffer"},on:{onSelectValue:t.setToReceiveItem}}):t._e()],1)],1),t._v(" "),n("v-btn",{staticStyle:{"font-weight":"bold"},attrs:{disabled:!t.isEnableToTrade,color:"primary",large:""},on:{click:t.trade}},[n("loading-circle",{attrs:{name:"trade_request",title:"send the request"}})],1),t._v(" "),n("dialog-message",{attrs:{name:"tradeAnswer"}})],1)],1)],1)],1)},Ho=[],jo={render:zo,staticRenderFns:Ho},Yo=jo,Go=n("VU/8"),Ko=P,Zo=Go(Do,Yo,!1,Ko,null,null),Jo=Zo.exports,Qo=n("NYxO"),Xo=n("//Fk"),ta=n.n(Xo),ea=n("mvHQ"),na=n.n(ea),sa=n("mtWM"),ra=n.n(sa),oa=ra.a.create({baseURL:"https://padraoserver.herokuapp.com"});oa.interceptors.response.use(function(t){return ta.a.resolve(t.data)},function(t){return 401===t.response.status?void(window.location.pathname="/login"):ta.a.reject(t)});var aa=this,ia=function(t){oa.defaults.headers.common.Authorization="Bearer "+t},ca=function(t){var e=t.user,n=t.token;return n&&(localStorage.setItem("authentication:authUser",na()({token:n})),ia(n)),e},ua=function(){var t=H()(D.a.mark(function t(){var e,n;return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(e=JSON.parse(localStorage.getItem("authentication:authUser")))){t.next=8;break}if(!(n=e.token)){t.next=8;break}return t.next=7,da({token:n});case 7:return t.abrupt("return",t.sent);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),ta.a.reject(t.t0);case 13:case"end":return t.stop()}},t,aa,[[0,10]])}));return function(){return t.apply(this,arguments)}}(),la=function(){return ia(null),localStorage.removeItem("authentication:authUser"),ta.a.resolve()},da=function(t){return oa.post("auth/signin/token",t).then(ca)},fa={signIn:function(t){return oa.post("auth/signin",t).then(ca)},signUp:function(t){return oa.post("auth/signup",t).then(ca)},getSignInUrl:function(t){return oa.get("auth/url/"+t)},signInWithGoogle:function(t){return oa.post("auth/signin/google",{code:t}).then(ca)},signInWithToken:da,autoSignIn:ua,signOut:la},ma={updateUser:function(t,e){return oa.put("users",{property:t,data:e})}},va={get:function(t){return oa.get("/books",{params:t})},register:function(t){return oa.post("/books/register",t)},getById:function(t){return oa.get("books/"+t)},getMatchUsers:function(t){return oa.get("books/match/users/"+t)}},ha={get:function(){return oa.get("/notifications")},seen:function(t){return oa.put("/notifications/"+t,{seen:!0})},delete:function(t){return oa.delete("/notifications/"+t)}},pa={create:function(t){return oa.post("trades",t)},getOne:function(t){return oa.get("trades:"+t)},get:function(t){return oa.get("trades",{params:t})},answer:function(t){var e=t.id,n=t.answer;return oa.post("trades/answer/"+e,{answer:n})}},ga={auth:fa,user:ma,book:va,notification:ha,trade:pa},_a=function(t){var e=t.from,n=t.data;Fa.dispatch("messageError",{message:n.message||n.message||n,from:e})},ba=function(t){var e=t.from,n=t.data;Fa.dispatch("messageError",{message:n.message||n.message||n,from:e})},ka=function(t){var e=t.from,n=t.data;Fa.dispatch("messageError",{message:n.message||n.message||n,from:e})},xa=function(t){return function(e){var n=e.response;if(console.log(t),console.log(n),n.status){var s={data:n.data,from:t};switch(n.status){case 404:_a(s);break;case 400:ba(s);break;default:ka(s)}Fa.dispatch("stopLoading",t)}}},ya=function(t,e){return function(n){if(console.log(t),console.log(e),console.log(n),!n)return null;Fa.dispatch("stopLoading",t),n.message&&Fa.dispatch("messageSuccess",{from:t,message:n.message}),e&&Fa.dispatch(e,n.data||n)}},wa={state:{user:null},mutations:{setUser:function(t,e){t.user=e},setUserProperty:function(t,e){var n=e.property,s=e.data;t.user[n]=s}},actions:{setUser:function(t,e){return(0,t.commit)("setUser",e)},setUserProperty:function(t,e){return(0,t.commit)("setUserProperty",e)},signIn:function(t,e){var n=(t.commit,e.data),s=e.from;return ga.auth.signIn(n).then(ya(s,"setUser")).catch(xa(s))},signUp:function(t,e){var n=(t.commit,e.data),s=e.from;return ga.auth.signUp(n).then(ya(s,"setUser")).catch(xa(s))},signinWithToken:function(t,e){t.commit,e.data,e.from;return ga.auth.signInWithToken().then().catch()},signOut:function(t){var e=t.commit;return ga.auth.signOut().then(e("setUser",null))},signInWithSocialRedirect:function(t,e){t.commit;return ga.auth.getSignInUrl(e).then(function(t){t&&(window.location.href=t.data)})},signInWithGoogle:function(t,e){var n=t.commit;return ga.auth.signInWithGoogle(e).then(function(t){return n("setUser",t.data)})},updateUserData:function(t,e){var n=(t.commit,e.from),s=e.data;return ga.user.updateUser(s.property,s.data).then(ya(n,"setUserProperty")).catch(xa(n))}},getters:{isAuthenticated:function(t){return!!t.user},user:function(t){return t.user}}},$a={state:{isLoading:[]},mutations:{startLoading:function(t,e){t.isLoading.push(e)},stopLoading:function(t,e){t.isLoading=t.isLoading.filter(function(t){return t!==e})}},actions:{startLoading:function(t,e){return(0,t.commit)("startLoading",e)},stopLoading:function(t,e){return(0,t.commit)("stopLoading",e)}},getters:{isLoading:function(t){return function(e){return t.isLoading.includes(e)}}}},La=n("Dd8w"),Ia=n.n(La),Ba={state:{message:null,messageFrom:null,messageType:null},mutations:{setMessage:function(t,e){t.message=e.message,t.messageFrom=e.from,t.messageType=e.type},clearMessages:function(t){t.message=null,t.messageFrom=null,t.messageType=null}},actions:{clearMessages:function(t){return(0,t.commit)("clearMessages")},messageSuccess:function(t,e){return(0,t.commit)("setMessage",Ia()({},e,{type:"success"}))},messageError:function(t,e){return(0,t.commit)("setMessage",Ia()({},e,{type:"error"}))}},getters:{message:function(t){return t.message},messageFrom:function(t){return t.messageFrom},messageType:function(t){return t.messageType}}},Ua={state:{loadedBooks:{},foundBooks:[],myWishList:[],myBooks:[],tradeToReceive:[],tradeToOffer:[],matchedUsers:[]},mutations:{addBook:function(t,e){t.loadedBooks=Ia()({},t.loadedBooks,G()({},e.bookId,e))},addManyBooks:function(t,e){t.loadedBooks=Ia()({},t.loadedBooks,e)},setFoundBooks:function(t,e){t.foundBooks=e},setTradeToReceive:function(t,e){t.tradeToReceive=e},setMyBooks:function(t,e){t.myBooks=e},setTradeToOffer:function(t,e){t.tradeToOffer=e},setMyWishList:function(t,e){t.myWishList=e},setMatchedUsers:function(t,e){t.matchedUsers=e}},actions:{fetchBookById:function(t,e){var n=t.commit;return ga.book.getById(e).then(function(t){return n("addBook",t)}).catch(function(t){return console.log(t)})},fetchBooksByManyIds:function(t,e){var n=t.commit,s=t.getters,r=t.dispatch,o=e.filter(function(t){return!s.bookById(t)});return 1===o.length?r("fetchBookById",o):o.length>1?ga.book.get({bookId:"$in:"+o.join(",")}).then(function(t){return t.map(function(t){return n("addBook",t)})}):null},registerUserBook:function(t,e){var n=(t.commit,t.dispatch);t.getters;return ga.book.register(e).then(function(){return n("fetchBookById",e.bookId)}).catch(xa("register"))},searchBooks:function(t,e){var n=t.commit,s=t.dispatch;return ga.book.get({q:e}).then(function(t){return n("setFoundBooks",t)}).then(function(){return s("clearMessages")}).catch(xa("search"))},getMatchUsers:function(t,e){var n=t.commit;return ga.book.getMatchUsers(e).then(function(t){return n("setMatchedUsers",t)})},fetchBooksByField:function(t){var e=t.commit,n=(t.getters,t.dispatch,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),s=n.commitName,r=n.filters;return ga.book.get(r).then(function(t){if(t&&!(t.length<1)){var n={},r=t.map(function(t){return n[t.bookId]=t,t.bookId});e("addManyBooks",n),s&&e(s,r)}})},myBooks:function(t){return(0,t.dispatch)("fetchBooksByField",{commitName:"setMyBooks",filters:{ownedBy:t.getters.user.userName}})},myWishList:function(t){return(0,t.dispatch)("fetchBooksByField",{commitName:"setMyWishList",filters:{requestedBy:t.getters.user.userName}})}},getters:{books:function(t){return t.loadedBooks},bookById:function(t){var e=t.loadedBooks;return function(t){return e[t]}},myBooks:function(t){var e=t.loadedBooks;return t.myBooks.map(function(t){return e[t]})},myWishList:function(t){var e=t.loadedBooks;return t.myWishList.map(function(t){return e[t]})},tradeToReceive:function(t){var e=t.loadedBooks;return t.tradeToReceive.map(function(t){return e[t]})},tradeToOffer:function(t){var e=t.loadedBooks;return t.tradeToOffer.map(function(t){return e[t]})},matchedUsers:function(t){return t.matchedUsers}}},Ta={state:{notifications:null},mutations:{setNotifications:function(t,e){t.notifications=e}},actions:{getNotifications:function(t){var e=t.commit;return ga.notification.get().then(function(t){return e("setNotifications",t)}).catch(function(t){return console.log(t)})},notificationSeen:function(t,e){t.commit;return ga.notification.seen(e)},deleteNotification:function(t,e){t.commit;return ga.notification.delete(e)}},getters:{notifications:function(t){return t.notifications},notSeenCount:function(t){var e=t.notifications;return e?e.filter(function(t){return!t.seen}).length:0}}},Ca=n("+6Bu"),Ra=n.n(Ca),Ea=this,Sa={state:{trades:[]},mutations:{setTrades:function(t,e){t.trades=e}},actions:{tradeRequest:function(t,e){t.commit;return ga.trade.create(e).then(ya("tradeAnswer","getTrades")).catch(xa("tradeAnswer"))},getTrades:function(t,e){var n=t.commit,s=t.dispatch;t.getters;return ga.trade.get(e).then(function(){var t=H()(D.a.mark(function t(e){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s("fetchBooksByManyIds",e.reduce(function(t,e){return t.concat(e.bookId,e.bookIdTarget)},[]));case 2:n("setTrades",e);case 3:case"end":return t.stop()}},t,Ea)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){return console.log(t)})},tradeAnswer:function(t,e){t.commit,t.dispatch;return ga.trade.answer(e).then(ya("tradeAnswer","getTrades")).catch(xa("tradeAnswer"))}},getters:{embedBookToTrade:function(t,e){var n=e.books;return function(t){var e=t.bookId,s=t.bookIdTarget,r=Ra()(t,["bookId","bookIdTarget"]);return Ia()({bookTarget:n[s],book:n[e]},r)}},tradesPending:function(t,e){var n=t.trades,s=e.embedBookToTrade;e.user;return n.filter(function(t){return"pending"===t.status}).map(s)},trades:function(t,e){var n=t.trades,s=e.embedBookToTrade;return n.map(s)}}};j.a.use(Qo.a);var Fa=new Qo.a.Store({modules:{user:wa,loading:$a,message:Ba,book:Ua,notification:Ta,trade:Sa}}),Na=function(t,e,n){return Fa.getters.isAuthenticated?"auth"===t.name?n({name:"home"}):n():"auth"===t.name?n():void n({name:"home"})};j.a.use(me.a);var Ma=new me.a({routes:[{path:"/",name:"home",component:Re},{path:"/login",name:"auth",component:vn,beforeEnter:Na},{path:"/user/settings",name:"user-settings",component:ws,beforeEnter:Na},{path:"/user/books",name:"user-books",component:qr},{path:"/auth/authcallback",name:"authcallback",props:function(t){return{code:t.query.code}},component:wn},{path:"/results",name:"books-result",props:function(t){return{search:t.query.search}},component:So},{path:"/books/:id",name:"book-details",component:$o},{path:"/trade/:user",props:function(t){return{book:t.query.bookId}},name:"trade",component:Jo},{path:"*",name:"notfound",component:En}],mode:"history"}),Va=n("3EgV"),Pa=n.n(Va),Oa=(n("7zck"),{name:"loading-circle",props:["title","name","type"],computed:{isLoading:function(){return this.$store.getters.isLoading(this.name)}}}),Aa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isLoading?n("v-progress-circular",{attrs:{indeterminate:""}}):n("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.title))])],1)},qa=[],Wa={render:Aa,staticRenderFns:qa},Da=Wa,za=n("VU/8"),Ha=O,ja=za(Oa,Da,!1,Ha,null,null),Ya=ja.exports,Ga={name:"form-message",props:["name"],computed:{message:function(){return this.$store.getters.message},shouldRender:function(){return this.$store.getters.messageFrom===this.name},messageType:function(){return this.$store.getters.messageType},icon:function(){return this.icons[this.messageType]},color:function(){return this.colors[this.messageType]}},data:function(){return{colors:{error:"error",success:"success"},icons:{error:"warning",success:"check_circle"}}},destroyed:function(){this.$store.dispatch("clearMessages")}},Ka=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-alert",{attrs:{transition:"scale-transition",outline:"",color:t.color,icon:t.icon,value:t.shouldRender}},[t._v("\n    "+t._s(t.message)+"\n  ")])],1)},Za=[],Ja={render:Ka,staticRenderFns:Za},Qa=Ja,Xa=n("VU/8"),ti=A,ei=Xa(Ga,Qa,!1,ti,null,null),ni=ei.exports,si={name:"dialog-message",props:["name"],computed:{shouldRender:function(){return this.$store.getters.messageFrom===this.name}},data:function(){return{dialog:!1}},watch:{shouldRender:function(){this.shouldRender&&(this.dialog=!0)},dialog:function(){!1===this.dialog&&this.$store.dispatch("clearMessages")}}},ri=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-card",[n("v-card-text",[n("form-message",{staticClass:"mt-4",attrs:{name:t.name}})],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"green darken-1",flat:"flat"},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("close")])],1)],1)],1)],1)},oi=[],ai={render:ri,staticRenderFns:oi},ii=ai,ci=n("VU/8"),ui=q,li=ci(si,ii,!1,ui,null,null),di=li.exports;j.a.use(Pa.a,{theme:{primary:"#2196f3"}}),j.a.component(ni.name,ni),j.a.component(Ya.name,Ya),j.a.component(di.name,di),j.a.config.productionTip=!1,new j.a({el:"#app",router:Ma,store:Fa,template:"<App/>",components:{App:fe},beforeCreate:function(){var t=this;return H()(D.a.mark(function e(){return D.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return Fa.dispatch("startLoading","autoSigning"),t.next=3,ga.auth.autoSignIn().then(function(t){return t?Fa.dispatch("setUser",t):null});case 3:Fa.dispatch("stopLoading","autoSigning");case 4:case"end":return t.stop()}},e,t)}))()}})},O0LR:function(t,e){},"Q+Zj":function(t,e){},SQRL:function(t,e){},T7Kz:function(t,e){},UKKv:function(t,e){},Vr4B:function(t,e){},VsN4:function(t,e){},YQew:function(t,e){},ZaCr:function(t,e){},ZntT:function(t,e){},aViI:function(t,e){},bXF6:function(t,e){},cR3A:function(t,e){},cz7T:function(t,e){},d2we:function(t,e){},dooJ:function(t,e){},dxLL:function(t,e){},egH7:function(t,e){},fIqz:function(t,e){},m9dR:function(t,e){},pipM:function(t,e){},q8MD:function(t,e){},qT1d:function(t,e){},sDqE:function(t,e){},ugs3:function(t,e){},v8BH:function(t,e){},vplh:function(t,e){},xgl4:function(t,e){},zeV4:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.595e4fd4f5eab0a19340.js.map